<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boulder Events Calendar</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem 0; /* py-8 equivalent - vertical padding only */
        }
        
        .container {
            max-width: 1280px; /* max-w-6xl = 72rem = 1152px, using 1280px for slightly wider */
            margin: 0 auto;
            padding: 0 1rem; /* px-4 equivalent */
        }
        
        /* Mobile Header Image */
        .mobile-header-image {
            display: none; /* Hidden by default */
        }
        
        @media (max-width: 640px) {
            .mobile-header-image {
                display: block;
                position: relative;
                width: calc(100% + 2rem); /* Account for container padding */
                margin: -2rem -1rem 1.25rem -1rem; /* Extend to edges */
                overflow: hidden;
            }
            
            .mobile-header-image img {
                width: 100%;
                height: auto;
                display: block;
                object-fit: cover;
            }
            
            .mobile-status-banner-wrapper {
                position: absolute;
                bottom: 5px;  /* 5px from bottom of image */
                left: 50%;
                transform: translateX(-50%);
                z-index: 10;
                white-space: nowrap; /* Prevent wrapping */
            }
            
            /* Mobile status banner should look exactly like desktop */
            .mobile-status-banner {
                display: inline-block;
                background: rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border-radius: 25px;
                padding: 10px 24px;
                color: white;
                font-size: 0.95em;
                cursor: pointer;
                transition: all 0.3s ease;
                border: 1px solid rgba(255, 255, 255, 0.3);
                user-select: none;
                white-space: nowrap; /* Prevent text wrapping */
            }
            
            .mobile-status-banner:hover {
                background: rgba(255, 255, 255, 0.35);
                transform: scale(1.05);
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            }
            
            .mobile-status-banner:active {
                transform: scale(1.02);
            }
            
            /* Hide desktop header elements on mobile */
            header h1,
            header .subtitle,
            .desktop-status-banner {
                display: none;
            }
            
            /* Keep header element but hide content */
            header {
                margin-bottom: 0;
                padding: 0;
                min-height: 0;
            }
        }
        
        /* Desktop/Tablet: Hide mobile header, show regular header */
        @media (min-width: 641px) {
            .mobile-header-image {
                display: none;
            }
        }
        
        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .filters {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .filter-section {
            margin-bottom: 20px;
        }
        
        .filter-section:last-child {
            margin-bottom: 0;
        }
        
        .filter-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            display: block;
            font-size: 0.95em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .filter-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .tag {
            padding: 8px 16px;
            border-radius: 20px;
            border: 2px solid #e0e0e0;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            user-select: none;
        }
        
        .tag:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }
        
        .tag.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .search-box {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: white;
        }
        
        .search-box:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        /* Search Section */
        .search-section {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            position: relative;
            z-index: 100;  /* Higher than mood/filter buttons */
        }
        
        /* Mobile: Sticky Search with smooth transition */
        @media (max-width: 640px) {
            .search-section {
                position: sticky;
                top: 16px;
                z-index: 1000;
            }
        }
        
        .search-container {
            position: relative;
            width: 100%;
            z-index: 100;  /* Ensure container is also above buttons */
        }
        
        .search-clear-btn {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            font-size: 20px;
            color: #999;
            cursor: pointer;
            padding: 5px 10px;
            line-height: 1;
            transition: color 0.2s ease;
            z-index: 10;
        }
        
        .search-clear-btn:hover {
            color: #667eea;
        }
        
        .search-clear-btn:active {
            transform: translateY(-50%) scale(0.95);
        }
        
        .search-autocomplete {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #667eea;
            border-top: none;
            border-radius: 0 0 15px 15px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            z-index: 2000;  /* Higher than everything else */
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
            margin-top: -10px;
        }
        
        .search-autocomplete.show {
            display: block;
        }
        
        .autocomplete-item {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            transition: all 0.2s ease;
        }
        
        .autocomplete-item:last-child {
            border-bottom: none;
        }
        
        .autocomplete-item:hover,
        .autocomplete-item.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .autocomplete-item-title {
            font-weight: 600;
            font-size: 0.95em;
            margin-bottom: 4px;
        }
        
        .autocomplete-item-venue {
            font-size: 0.85em;
            color: #666;
        }
        
        .autocomplete-item:hover .autocomplete-item-venue,
        .autocomplete-item.selected .autocomplete-item-venue {
            color: rgba(255, 255, 255, 0.9);
        }
        
        .autocomplete-category {
            padding: 8px 20px;
            font-size: 0.75em;
            font-weight: 600;
            color: #667eea;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            background: #f7f9ff;
            border-bottom: 1px solid #e0e7ff;
            position: sticky;
            top: 0;
        }
        
        /* Smart Status Banner */
        .status-banner-wrapper {
            text-align: center;
            margin-top: 0;
        }
        
        .status-banner {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 10px 24px;
            color: white;
            font-size: 0.95em;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
            user-select: none;
        }
        
        .status-banner:hover {
            background: rgba(255, 255, 255, 0.35);
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .status-banner:active {
            transform: scale(1.02);
        }
        
        .status-count {
            font-weight: 700;
            color: #FFD700;
        }
        
        .mood-title {
            text-align: center;
            font-size: 1.8em;
            color: #333;
            margin-bottom: 25px;
            font-weight: 600;
        }
        
        /* Mobile: Glass effect for all collapsible sections */
        .mobile-only {
            display: none;
        }
        
        @media (max-width: 640px) {
            .mobile-only {
                display: block;
            }
            
            /* Mood Toggle Button - Glass effect */
            .mood-toggle-btn {
                width: 100%;
                padding: 18px 20px;
                background: rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                border-radius: 15px;
                font-size: 1.1em;
                font-weight: 600;
                color: white;
                cursor: pointer;
                display: flex;
                justify-content: center;
                align-items: center;
                transition: all 0.3s ease;
                margin-bottom: 15px;
                gap: 10px;
            }
            
            .mood-toggle-btn:hover {
                background: rgba(255, 255, 255, 0.35);
                /* Removed transform to prevent lift */
            }
            
            .mood-toggle-btn:active {
                transform: scale(0.98);
            }
            
            .mood-toggle-icon {
                font-size: 0.9em;
                transition: transform 0.3s ease;
                margin-left: auto;
            }
            
            .mood-toggle-text {
                flex: 1;
                text-align: center;
            }
            
            .mood-toggle-btn.expanded {
                border-radius: 15px 15px 0 0;
                margin-bottom: 0;
            }
            
            .mood-toggle-btn.expanded .mood-toggle-icon {
                transform: rotate(180deg);
            }
            
            /* Filters Toggle Button - Glass effect */
            .filters-toggle-btn {
                width: 100%;
                padding: 18px 20px;
                background: rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                border-radius: 15px;
                font-size: 1.1em;
                font-weight: 600;
                color: white;
                cursor: pointer;
                display: flex;
                justify-content: center;
                align-items: center;
                transition: all 0.3s ease;
                margin-bottom: 15px;
                gap: 10px;
            }
            
            .filters-toggle-btn:hover {
                background: rgba(255, 255, 255, 0.35);
                /* Removed transform to prevent lift */
            }
            
            .filters-toggle-btn:active {
                transform: scale(0.98);
            }
            
            .filters-toggle-icon {
                font-size: 0.9em;
                transition: transform 0.3s ease;
                margin-left: auto;
            }
            
            .filters-toggle-text {
                flex: 1;
                text-align: center;
            }
            
            .filters-toggle-btn.expanded {
                border-radius: 15px 15px 0 0;
                margin-bottom: 0;
            }
            
            .filters-toggle-btn.expanded .filters-toggle-icon {
                transform: rotate(180deg);
            }
            
            /* Expanded content - same glass box, connected to button */
            .mood-content {
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.4s ease;
            }
            
            .mood-content.expanded {
                max-height: 2000px;
                padding: 20px;
                background: rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                border-top: none;
                border-radius: 0 0 15px 15px;
                margin-bottom: 15px;
            }
            
            .quick-filters-wrapper {
                margin-bottom: 15px;
            }
            
            /* Hide title in mobile expanded view */
            .mood-content .mood-title {
                display: none;
            }
            
        }
        
        /* Desktop & Tablet: Glass effect with collapsible Mood Selector */
        @media (min-width: 641px) {
            /* Show mood toggle button on desktop/tablet */
            .mood-toggle-btn {
                display: block;
                width: 100%;
                padding: 18px 20px;
                background: rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                border-radius: 15px;
                font-size: 1.1em;
                font-weight: 600;
                color: white;
                cursor: pointer;
                display: flex;
                justify-content: center;
                align-items: center;
                transition: all 0.3s ease;
                margin-bottom: 15px;
                gap: 10px;
            }
            
            .mood-toggle-btn:hover {
                background: rgba(255, 255, 255, 0.35);
            }
            
            .mood-toggle-icon {
                font-size: 0.9em;
                transition: transform 0.3s ease;
                margin-left: auto;
            }
            
            .mood-toggle-text {
                flex: 1;
                text-align: center;
            }
            
            .mood-toggle-btn.expanded {
                border-radius: 15px 15px 0 0;
                margin-bottom: 0;
            }
            
            .mood-toggle-btn.expanded .mood-toggle-icon {
                transform: rotate(180deg);
            }
            
            /* Mood content - glass effect, collapsible */
            .mood-content {
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.4s ease;
            }
            
            .mood-content.expanded {
                max-height: 2000px;
                padding: 30px;
                background: rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                border-top: none;
                border-radius: 0 0 15px 15px;
                margin-bottom: 30px;
            }
            
            /* Filters - glass effect, always open */
            .quick-filters {
                max-height: none !important;
                background: rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                border-radius: 15px;
                padding: 20px;
                margin-bottom: 20px;
                box-shadow: none;
            }
            
            /* Hide mood title in expanded view */
            .mood-content .mood-title {
                display: none;
            }
        }
        
        .mood-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .mood-label {
            font-size: 1.1em;
            font-weight: 600;
            color: white;
            text-align: center;
            z-index: 1;
        }
        
        .mood-icon {
            width: 48px;
            height: 48px;
            color: white;
            opacity: 0.9;
            z-index: 1;
        }
        
        @media (max-width: 768px) {
            .mood-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* Mobile phones portrait - larger text and icons */
        @media (max-width: 600px) and (orientation: portrait) {
            h1 {
                font-size: 2.2em;
            }
            
            .mood-icon {
                width: 56px;
                height: 56px;
            }
            
            .mood-label {
                font-size: 1.25em;
            }
            
            .mood-count {
                font-size: 0.95em;
                padding: 5px 12px;
            }
            
            .mood-button {
                padding: 22px;
            }
            
            .mood-title {
                font-size: 2em;
            }
            
            .search-box {
                font-size: 1.05em;
                padding: 16px 20px;
            }
            
            .status-banner {
                font-size: 1.05em;
                padding: 12px 26px;
            }
        }
        
        /* Tablet portrait (600px - 900px) - 3 columns */
        @media (min-width: 600px) and (max-width: 900px) and (orientation: portrait) {
            .mood-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .mood-icon {
                width: 56px;
                height: 56px;
            }
            
            .mood-label {
                font-size: 1.15em;
            }
        }
        
        /* Mobile landscape - 4 columns for iPhone landscape */
        @media (max-height: 600px) and (orientation: landscape) {
            .mood-grid {
                grid-template-columns: repeat(4, 1fr) !important;
                gap: 15px;
            }
            
            .mood-icon {
                width: 48px !important;
                height: 48px !important;
            }
            
            .mood-label {
                font-size: 1em !important;
            }
            
            .mood-button {
                padding: 26px !important;
            }
            
            .mood-count {
                font-size: 1.05em !important;
                padding: 6px 14px !important;
            }
            
            .mood-title {
                font-size: 2.2em !important;
            }
        }
        
        /* Tablet and larger screens (768px+) */
        @media (min-width: 768px) {
            .mood-icon {
                width: 64px;
                height: 64px;
            }
            
            .mood-label {
                font-size: 1.2em;
            }
            
            .mood-count {
                font-size: 0.95em;
            }
            
            .event-title {
                font-size: 1.3em;
            }
            
            .event-venue {
                font-size: 1.05em;
            }
            
            .event-description {
                font-size: 1em;
            }
            
            .filter-label {
                font-size: 1.05em;
            }
            
            .tag {
                font-size: 1em;
                padding: 10px 18px;
            }
            
            .search-box {
                font-size: 1.1em;
            }
        }
        
        /* Desktop screens (1024px+) */
        @media (min-width: 1024px) {
            h1 {
                font-size: 3.5em;
            }
            
            .subtitle {
                font-size: 1.4em;
            }
            
            .mood-icon {
                width: 72px;
                height: 72px;
            }
            
            .mood-label {
                font-size: 1.3em;
            }
            
            .mood-count {
                font-size: 1em;
            }
            
            .mood-title {
                font-size: 2.2em;
            }
            
            .today-title {
                font-size: 2.2em;
            }
            
            .lets-go-btn {
                font-size: 1.5em;
                padding: 20px 60px;
            }
            
            .event-title {
                font-size: 1.5em;
            }
            
            .event-venue {
                font-size: 1.15em;
            }
            
            .event-description {
                font-size: 1.05em;
            }
            
            .filter-label {
                font-size: 1.1em;
            }
            
            .tag {
                font-size: 1.05em;
                padding: 10px 20px;
            }
            
            .search-box {
                font-size: 1.15em;
                padding: 16px 22px;
            }
        }
        
        /* Large desktop screens (1440px+) */
        @media (min-width: 1440px) {
            h1 {
                font-size: 4em;
            }
            
            .subtitle {
                font-size: 1.5em;
            }
            
            .mood-icon {
                width: 80px;
                height: 80px;
            }
            
            .mood-label {
                font-size: 1.4em;
            }
            
            .mood-button {
                padding: 25px;
            }
            
            .event-title {
                font-size: 1.6em;
            }
            
            .event-description {
                font-size: 1.1em;
            }
        }
        
        .mood-button {
            position: relative;
            aspect-ratio: 1;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        .mood-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.25);
        }
        
        .mood-button.active {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 3px solid white;
        }
        
        .mood-button.active::after {
            content: 'âœ“';
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            color: inherit;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
        }
        
        .mood-count {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(255,255,255,0.3);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            backdrop-filter: blur(5px);
        }
        
        /* Mood Button Gradients */
        .music-mood {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .party-mood {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .learning-mood {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .family-mood {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        
        .chill-mood {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }
        
        .arts-mood {
            background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
        }
        
        .games-mood {
            background: linear-gradient(135deg, #5f72bd 0%, #9b23ea 100%);
        }
        
        .comedy-mood {
            background: linear-gradient(135deg, #ffeaa7 0%, #fd79a8 100%);
        }
        
        /* Quick Filters */
        .quick-filters {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        /* Hide on mobile by default - controlled by expanded class */
        @media (max-width: 640px) {
            .quick-filters {
                display: none;  /* Hidden by default on mobile */
                background: transparent;  /* Remove white background */
                box-shadow: none;
                padding: 0;
                margin-bottom: 0;
            }
            
            .quick-filters.expanded {
                display: flex;  /* Show when expanded */
                flex-direction: column;
                padding: 20px;
                background: rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                border-top: none;
                border-radius: 0 0 15px 15px;
                box-shadow: none;
                margin-bottom: 0;
            }
        }
        
        @media (max-width: 768px) and (min-width: 641px) {
            .quick-filters {
                flex-direction: column;
            }
        }
        
        .filter-group {
            flex: 1;
            min-width: 180px;
        }
        
        @media (max-width: 768px) {
            .filter-group {
                min-width: 100%;
            }
        }
        
        .filter-group label {
            display: block;
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
        
        .filter-dropdown {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            font-size: 1em;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .filter-dropdown option {
            color: #333;
            background: white;
        }
        
        .filter-dropdown:hover {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .filter-dropdown:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        /* Active Filters Pills */
        .active-filters {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .active-filters-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }
        
        .active-filters-label {
            font-weight: 600;
            color: white;
            font-size: 0.95em;
            white-space: nowrap;
        }
        
        .filter-pills {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .filter-pill {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .filter-pill .remove-pill {
            cursor: pointer;
            font-weight: bold;
            opacity: 0.8;
            transition: opacity 0.2s;
        }
        
        .filter-pill .remove-pill:hover {
            opacity: 1;
        }
        
        .clear-all-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }
        
        .clear-all-btn:hover {
            background: #d32f2f;
            transform: scale(1.05);
        }
        
        /* Advanced Filters */
        .advanced-filters {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .advanced-toggle {
            width: 100%;
            background: transparent;
            border: none;
            padding: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            color: #667eea;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .advanced-toggle:hover {
            color: #764ba2;
        }
        
        .toggle-icon {
            transition: transform 0.3s ease;
        }
        
        .advanced-toggle.open .toggle-icon {
            transform: rotate(180deg);
        }
        
        .advanced-content {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
        }
        
        .filter-section {
            margin-bottom: 20px;
        }
        
        .filter-section:last-child {
            margin-bottom: 0;
        }
        
        .filter-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            display: block;
            font-size: 0.95em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .filter-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .tag {
            padding: 8px 16px;
            border-radius: 20px;
            border: 2px solid #e0e0e0;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            user-select: none;
        }
        
        .tag:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }
        
        .tag.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }
        
        .search-box:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .stats {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.1em;
            backdrop-filter: blur(10px);
        }
        
        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .event-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        
        .event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.25);
        }
        
        /* Happy Hour Promo Card */
        .promo-card {
            background: linear-gradient(135deg, #ff9a56 0%, #ff6a88 100%) !important;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex !important;
            flex-direction: column;
            cursor: pointer;
            text-decoration: none;
            color: white;
            position: relative;
            min-height: 400px;
        }
        
        .promo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 106, 136, 0.4);
        }
        
        .promo-card-content {
            padding: 40px 30px;
            text-align: center;
            display: flex !important;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            flex: 1;
        }
        
        .promo-card-icon {
            font-size: 3em;
            line-height: 1;
        }
        
        .promo-card-title {
            font-size: 1.8em;
            font-weight: 700;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .promo-card-subtitle {
            font-size: 1.3em;
            font-weight: 600;
            margin: 0;
            opacity: 0.95;
        }
        
        .promo-card-description {
            font-size: 1em;
            opacity: 0.9;
            line-height: 1.5;
            max-width: 280px;
        }
        
        .promo-card-features {
            display: flex;
            gap: 15px;
            font-size: 0.9em;
            opacity: 0.85;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .promo-card-cta {
            background: white;
            color: #ff6a88;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1.1em;
            margin-top: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: transform 0.2s ease;
        }
        
        .promo-card:hover .promo-card-cta {
            transform: scale(1.05);
        }
        
        .promo-card-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.75em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        
        .event-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            object-position: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .event-content {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .event-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            line-height: 1.3;
        }
        
        .event-venue {
            color: #667eea;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
        
        .clickable-venue {
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-block;
        }
        
        .clickable-venue:hover {
            color: #764ba2;
            text-decoration: underline;
        }
        
        .clickable-tag {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .clickable-tag:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            transform: scale(1.05);
        }
        
        .event-location {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 12px;
        }
        
        .event-date, .event-time {
            color: #555;
            margin-bottom: 5px;
            font-size: 0.95em;
        }
        
        .event-recurring {
            background: #ffeaa7;
            color: #d63031;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 0.85em;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 10px;
        }
        
        .event-description {
            color: #666;
            line-height: 1.5;
            margin-bottom: 15px;
            flex-grow: 1;
            font-size: 0.95em;
        }
        
        .event-additional-info {
            color: #4a5568;
            background: #f7fafc;
            border-left: 3px solid #667eea;
            padding: 8px 12px;
            margin-bottom: 15px;
            font-size: 0.9em;
            border-radius: 4px;
        }
        
        .event-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }
        
        .event-tag {
            background: #f0f4ff;
            color: #667eea;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 500;
        }
        
        .event-link {
            display: inline-block;
            margin-top: 10px;
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }
        
        .event-link:hover {
            color: #764ba2;
        }
        
        .no-events {
            text-align: center;
            color: white;
            font-size: 1.3em;
            padding: 60px 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }
            
            .events-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Floating Feedback Button */
        .feedback-button {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 40;
            background: rgba(255, 255, 255, 0.2);  /* Match status banner */
            backdrop-filter: blur(10px);  /* Match status banner */
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);  /* Match status banner */
            color: white;  /* Changed to white to match status banner */
            padding: 14px 20px;  /* Increased vertical padding for more circular shape */
            border-radius: 50px;  /* More circular */
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 60px;
            font-size: 1em;
        }
        
        .feedback-button:hover {
            background: rgba(255, 255, 255, 0.35);  /* Match status banner hover */
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .feedback-button-emoji {
            font-size: 1.25em;
        }
        
        .feedback-button-text {
            display: none;
        }
        
        @media (min-width: 768px) {
            .feedback-button-text {
                display: inline;
            }
        }
        
        /* Feedback Modal */
        .feedback-modal-overlay {
            position: fixed;
            inset: 0;
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }
        
        .feedback-modal-content {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            width: 100%;
            max-width: 672px;
            max-height: 90vh;
            overflow: hidden;
            position: relative;
        }
        
        .feedback-modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            z-index: 10;
            background: #f3f4f6;
            color: #4b5563;
            border-radius: 9999px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.25em;
            transition: background 0.2s;
        }
        
        .feedback-modal-close:hover {
            background: #e5e7eb;
        }
        
        .feedback-modal-iframe {
            width: 100%;
            height: 600px;
            border: none;
        }
        
        /* Footer CTA */
        .footer-cta {
            text-align: center;
            padding: 48px 0;
            margin-top: 32px;
        }
        
        .footer-cta-text {
            color: white;
            font-size: 1.125em;
            margin-bottom: 16px;
        }
        
        .footer-cta-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            color: #4c1d95;
            padding: 12px 24px;
            border-radius: 9999px;
            font-weight: 600;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            font-size: 1em;
            text-decoration: none;
        }
        
        .footer-cta-button:hover {
            background: white;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            transform: scale(1.05);
        }
        
        /* Hide elements when modal is open */
        .modal-open .feedback-button {
            display: none !important;
        }
        
        .modal-open .search-section {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Mobile Header Image (visible only on mobile) -->
        <div class="mobile-header-image">
            <img src="images/boulderevents-header-small.png" alt="Boulder Events Calendar">
            <div class="mobile-status-banner-wrapper">
                <div class="status-banner mobile-status-banner" id="mobileStatusBanner">
                    ðŸŽ‰ <span class="status-count" id="mobileStatusCount">0</span> <span id="mobileStatusText">events today</span>
                </div>
            </div>
        </div>
        
        <header>
            <h1>ðŸŽ‰ Boulder Events Calendar</h1>
            <p class="subtitle">Discover what's happening in Boulder County</p>
            
            <!-- Smart Status Banner (desktop/tablet only) -->
            <div class="status-banner-wrapper desktop-status-banner">
                <div class="status-banner" id="statusBanner">
                    ðŸŽ‰ <span class="status-count" id="statusCount">0</span> <span id="statusText">events today</span>
                </div>
            </div>
        </header>
        
        <!-- Search Bar -->
        <div class="search-section">
            <div class="search-container">
                <input type="text" class="search-box" id="searchBox" placeholder="ðŸ” Search events by name, venue, or keyword...">
                <button class="search-clear-btn" id="searchClearBtn" style="display: none;" aria-label="Clear search">âœ•</button>
                <div class="search-autocomplete" id="searchAutocomplete"></div>
            </div>
        </div>
        
        <!-- Mood Filter Buttons -->
        <!-- Mood Selector (Mobile Collapsible) -->
        <!-- Mobile Collapsible Button -->
        <button class="mood-toggle-btn mobile-only" id="moodToggleBtn">
            <span class="mood-toggle-text">âœ¨ Mood Selector</span>
            <span class="mood-toggle-icon">â–¼</span>
        </button>
        
        <!-- Mood Content (collapsible on mobile) -->
        <div class="mood-content" id="moodContent">
            <div class="mood-grid">
                <button class="mood-button music-mood" data-mood="music">
                    <div class="mood-label">Live Music</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <g transform="matrix(1,0,0,1,-0.15288,0.161392)">
                            <path d="M6.098,7.87C5.998,8.37 5.556,8.747 5.027,8.747C4.425,8.747 3.935,8.258 3.935,7.655C3.935,7.053 4.425,6.563 5.027,6.563C5.304,6.563 5.557,6.667 5.749,6.837C6.007,5.836 6.398,4.306 6.398,4.306C6.431,4.173 6.551,4.08 6.688,4.08L9.616,4.08C9.641,4.08 9.665,4.083 9.689,4.089C9.822,4.122 9.917,4.242 9.916,4.38C9.916,4.404 9.914,4.429 9.908,4.452C9.899,4.487 9.114,7.646 9.059,7.841C9.056,7.851 9.053,7.861 9.049,7.87C8.949,8.37 8.508,8.747 7.979,8.747C7.376,8.747 6.887,8.258 6.887,7.655C6.887,7.053 7.376,6.563 7.979,6.563C8.253,6.563 8.504,6.665 8.696,6.832C8.777,6.509 8.872,6.131 8.962,5.767L6.643,5.767C6.411,6.673 6.139,7.733 6.107,7.843C6.104,7.852 6.101,7.861 6.098,7.87ZM6.921,4.68C6.89,4.804 6.847,4.972 6.797,5.167L9.112,5.167C9.157,4.983 9.199,4.816 9.233,4.68L6.921,4.68ZM5.027,7.163C4.756,7.163 4.535,7.384 4.535,7.655C4.535,7.926 4.756,8.147 5.027,8.147C5.298,8.147 5.519,7.926 5.519,7.655C5.519,7.384 5.298,7.163 5.027,7.163ZM7.979,7.163C7.707,7.163 7.487,7.384 7.487,7.655C7.487,7.926 7.707,8.147 7.979,8.147C8.25,8.147 8.47,7.926 8.47,7.655C8.47,7.384 8.25,7.163 7.979,7.163Z"/>
                        </g>
                        <path d="M17.463,14.144C17.298,14.144 17.163,14.01 17.163,13.844C17.163,13.679 17.298,13.544 17.463,13.544L18.238,13.544C18.403,13.544 18.538,13.679 18.538,13.844C18.538,14.01 18.403,14.144 18.238,14.144L17.463,14.144Z"/>
                        <g transform="matrix(1,0,0,1,-7.36595,-7.01644)">
                            <path d="M17.463,14.144C17.298,14.144 17.163,14.01 17.163,13.844C17.163,13.679 17.298,13.544 17.463,13.544L18.238,13.544C18.403,13.544 18.538,13.679 18.538,13.844C18.538,14.01 18.403,14.144 18.238,14.144L17.463,14.144Z"/>
                        </g>
                        <g transform="matrix(1,0,0,1,-13.3605,-8.99116)">
                            <path d="M17.463,14.144C17.298,14.144 17.163,14.01 17.163,13.844C17.163,13.679 17.298,13.544 17.463,13.544L18.238,13.544C18.403,13.544 18.538,13.679 18.538,13.844C18.538,14.01 18.403,14.144 18.238,14.144L17.463,14.144Z"/>
                        </g>
                        <g transform="matrix(1,0,0,1,-11.965,-3.35023)">
                            <path d="M17.463,14.144C17.298,14.144 17.163,14.01 17.163,13.844C17.163,13.679 17.298,13.544 17.463,13.544L18.238,13.544C18.403,13.544 18.538,13.679 18.538,13.844C18.538,14.01 18.403,14.144 18.238,14.144L17.463,14.144Z"/>
                        </g>
                        <g transform="matrix(0.705932,0.708279,-0.743314,0.740851,0.897143,-7.6499)">
                            <path d="M21.88,5.628L21.88,7.428C21.88,7.586 21.746,7.714 21.58,7.714L20.338,7.714C20.172,7.714 20.038,7.586 20.038,7.428L20.038,5.628C20.038,5.47 20.172,5.342 20.338,5.342L21.58,5.342C21.746,5.342 21.88,5.47 21.88,5.628ZM21.28,5.914L20.638,5.914L20.638,7.142L21.28,7.142L21.28,5.914Z"/>
                        </g>
                        <g transform="matrix(1,0,0,1,2.80001,2.58953)">
                            <path d="M17.463,14.144C17.298,14.144 17.163,14.01 17.163,13.844C17.163,13.679 17.298,13.544 17.463,13.544L18.238,13.544C18.403,13.544 18.538,13.679 18.538,13.844C18.538,14.01 18.403,14.144 18.238,14.144L17.463,14.144Z"/>
                        </g>
                        <path d="M19,17.62C18.9,18.12 18.459,18.497 17.93,18.497C17.327,18.497 16.838,18.008 16.838,17.406C16.838,16.803 17.327,16.314 17.93,16.314C18.204,16.314 18.456,16.416 18.647,16.583C18.775,16.075 18.938,15.421 19.079,14.855C19.073,14.832 19.07,14.807 19.07,14.782C19.07,14.705 19.099,14.634 19.147,14.581L19.391,13.602C19.424,13.468 19.544,13.374 19.682,13.374L21.321,13.374C21.413,13.374 21.499,13.416 21.556,13.487C21.613,13.558 21.634,13.652 21.614,13.741L21.364,14.848C21.333,14.985 21.212,15.082 21.072,15.082L19.641,15.082C19.377,16.139 19.047,17.46 19.01,17.592C19.007,17.601 19.004,17.611 19,17.62ZM17.93,16.914C17.658,16.914 17.438,17.134 17.438,17.406C17.438,17.677 17.658,17.897 17.93,17.897C18.201,17.897 18.421,17.677 18.421,17.406C18.421,17.134 18.201,16.914 17.93,16.914ZM19.79,14.482L20.832,14.482L20.946,13.974L19.916,13.974L19.79,14.482Z"/>
                        <path d="M6.349,17.008C6.213,17.169 6.031,17.406 5.877,17.681C5.701,17.995 5.555,18.36 5.59,18.713C5.631,19.121 5.874,19.39 6.165,19.564C6.486,19.756 6.864,19.838 7.137,19.854C7.72,19.887 8.443,19.838 10.069,18.51C11.569,17.286 12.026,16.389 12.424,15.859C12.754,15.42 13.054,15.188 13.676,15.165C14.22,15.145 14.556,15.312 14.771,15.528C15.088,15.846 15.143,16.302 15.159,16.554C15.171,16.729 15.099,17.034 15.091,17.341C15.085,17.535 15.098,17.74 15.273,17.857C15.868,18.256 16.413,17.864 16.413,17.864C16.546,17.766 16.734,17.795 16.832,17.929C16.93,18.062 16.901,18.25 16.767,18.348C16.767,18.348 15.894,18.995 14.939,18.355C14.642,18.157 14.522,17.858 14.496,17.534C14.468,17.181 14.574,16.797 14.56,16.592C14.55,16.437 14.542,16.148 14.346,15.952C14.22,15.825 14.016,15.753 13.699,15.765C13.173,15.784 13.01,16.055 12.699,16.51C12.31,17.078 11.757,17.906 10.449,18.975C8.605,20.481 7.764,20.491 7.102,20.453C6.375,20.411 5.113,19.976 4.993,18.773C4.946,18.301 5.119,17.807 5.354,17.387C5.542,17.053 5.766,16.767 5.924,16.582L5.473,16.13C5.17,15.826 5.149,15.341 5.425,15.013L11.184,8.158L11.182,8.031C11.182,7.339 11.373,6.691 11.706,6.138C11.562,5.789 11.631,5.371 11.915,5.087C12.2,4.802 12.617,4.733 12.967,4.877C13.52,4.545 14.168,4.353 14.86,4.353C16.89,4.353 18.538,6.001 18.538,8.031C18.538,8.719 18.349,9.362 18.02,9.913C18.181,10.269 18.115,10.702 17.823,10.994C17.531,11.286 17.098,11.352 16.742,11.191C16.191,11.52 15.547,11.709 14.86,11.709L14.737,11.707L7.799,17.538C7.516,17.776 7.098,17.758 6.836,17.496L6.349,17.008ZM5.898,15.706L7.261,17.073C7.302,17.114 7.368,17.117 7.413,17.079L13.941,11.593C12.65,11.26 11.633,10.244 11.299,8.954L5.885,15.399C5.808,15.489 5.814,15.623 5.898,15.706ZM12.111,6.646C11.9,7.063 11.782,7.533 11.782,8.031C11.782,9.73 13.161,11.109 14.86,11.109C15.358,11.109 15.828,10.99 16.244,10.78L12.111,6.646ZM17.399,10.054L12.856,5.511C12.713,5.368 12.482,5.368 12.34,5.511C12.197,5.653 12.197,5.884 12.34,6.027L16.883,10.57C17.025,10.712 17.256,10.712 17.399,10.57C17.541,10.428 17.541,10.196 17.399,10.054ZM17.609,9.416C17.819,8.999 17.938,8.529 17.938,8.031C17.938,6.332 16.559,4.953 14.86,4.953C14.362,4.953 13.892,5.071 13.475,5.282L17.609,9.416Z"/>
                    </svg>
                    <div class="mood-count" id="musicCount"></div>
                </button>
                
                <button class="mood-button party-mood" data-mood="party">
                    <div class="mood-label">Party Vibes</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <g transform="matrix(1.12318,0,0,1.17968,-1.37302,-2.06212)">
                            <g transform="matrix(1,0,0,0.864695,0,2.65685)">
                                <path d="M12.141,20.299C12.141,20.464 12.007,20.599 11.841,20.599C11.676,20.599 11.541,20.464 11.541,20.299L11.541,18.814C11.541,18.648 11.676,18.514 11.841,18.514C12.007,18.514 12.141,18.648 12.141,18.814L12.141,20.299Z"/>
                            </g>
                            <g transform="matrix(6.12323e-17,-1,0.864695,5.29473e-17,-11.2374,25.2236)">
                                <path d="M12.141,20.299C12.141,20.464 12.007,20.599 11.841,20.599C11.676,20.599 11.541,20.464 11.541,20.299L11.541,18.814C11.541,18.648 11.676,18.514 11.841,18.514C12.007,18.514 12.141,18.648 12.141,18.814L12.141,20.299Z"/>
                            </g>
                            <g transform="matrix(6.12323e-17,-1,0.864695,5.29473e-17,1.21351,25.2236)">
                                <path d="M12.141,20.299C12.141,20.464 12.007,20.599 11.841,20.599C11.676,20.599 11.541,20.464 11.541,20.299L11.541,18.814C11.541,18.648 11.676,18.514 11.841,18.514C12.007,18.514 12.141,18.648 12.141,18.814L12.141,20.299Z"/>
                            </g>
                            <g transform="matrix(0.707107,0.707107,-0.611432,0.611432,11.0423,-2.55793)">
                                <path d="M12.141,20.299C12.141,20.464 12.007,20.599 11.841,20.599C11.676,20.599 11.541,20.464 11.541,20.299L11.541,18.814C11.541,18.648 11.676,18.514 11.841,18.514C12.007,18.514 12.141,18.648 12.141,18.814L12.141,20.299Z"/>
                            </g>
                            <g transform="matrix(0.707107,-0.707107,0.611432,0.611432,-4.07487,14.1884)">
                                <path d="M12.141,20.299C12.141,20.464 12.007,20.599 11.841,20.599C11.676,20.599 11.541,20.464 11.541,20.299L11.541,18.814C11.541,18.648 11.676,18.514 11.841,18.514C12.007,18.514 12.141,18.648 12.141,18.814L12.141,20.299Z"/>
                            </g>
                            <g transform="matrix(0.707107,-0.707107,-0.611432,-0.611432,11.0423,29.3046)">
                                <path d="M12.141,20.299C12.141,20.464 12.007,20.599 11.841,20.599C11.676,20.599 11.541,20.464 11.541,20.299L11.541,18.814C11.541,18.648 11.676,18.514 11.841,18.514C12.007,18.514 12.141,18.648 12.141,18.814L12.141,20.299Z"/>
                            </g>
                            <g transform="matrix(0.707107,0.707107,0.611432,-0.611432,-4.07487,12.5582)">
                                <path d="M12.141,20.299C12.141,20.464 12.007,20.599 11.841,20.599C11.676,20.599 11.541,20.464 11.541,20.299L11.541,18.814C11.541,18.648 11.676,18.514 11.841,18.514C12.007,18.514 12.141,18.648 12.141,18.814L12.141,20.299Z"/>
                            </g>
                            <g transform="matrix(0.992963,0,0,0.992963,0.0141704,0.0250742)">
                                <path d="M11.674,5.371L3.697,5.371C3.53,5.371 3.395,5.235 3.395,5.069C3.395,4.902 3.53,4.767 3.697,4.767L20.256,4.767C20.423,4.767 20.558,4.902 20.558,5.069C20.558,5.235 20.423,5.371 20.256,5.371L12.279,5.371L12.279,7.194L12.958,7.194C13.125,7.194 13.26,7.33 13.26,7.496L13.26,8.735C15.313,9.323 16.817,11.215 16.817,13.456C16.817,14.301 16.603,15.097 16.226,15.792C16.213,15.84 16.188,15.883 16.155,15.918C15.339,17.323 13.846,18.286 12.124,18.362C12.096,18.366 12.067,18.367 12.038,18.365L11.906,18.366C9.196,18.366 6.996,16.166 6.996,13.456C6.996,11.183 8.543,9.269 10.64,8.71L10.64,7.496C10.64,7.329 10.776,7.194 10.942,7.194L11.674,7.194L11.674,5.371ZM13.808,17.32C14.427,17.015 14.963,16.564 15.37,16.014L14.723,16.014C14.472,16.561 14.144,16.989 13.808,17.32ZM7.611,13.758C7.652,14.349 7.812,14.908 8.068,15.41L9.026,15.41C8.882,14.934 8.794,14.387 8.79,13.758L7.611,13.758ZM8.443,16.014C8.917,16.655 9.565,17.16 10.317,17.459C9.93,17.111 9.542,16.64 9.254,16.014L8.443,16.014ZM9.395,13.758C9.4,14.401 9.505,14.948 9.67,15.41L10.677,15.41C10.607,14.929 10.558,14.38 10.546,13.758L9.395,13.758ZM9.943,16.014C10.302,16.662 10.78,17.09 11.186,17.363C11.047,17.023 10.901,16.577 10.784,16.014L9.943,16.014ZM9.805,11.502C9.614,11.967 9.472,12.514 9.418,13.154L10.546,13.154C10.558,12.531 10.607,11.983 10.677,11.502L9.805,11.502ZM11.289,11.502C11.215,11.975 11.163,12.523 11.151,13.154L12.827,13.154C12.814,12.523 12.762,11.975 12.688,11.502L11.289,11.502ZM12.827,13.758L11.151,13.758C11.163,14.389 11.215,14.937 11.289,15.41L12.688,15.41C12.762,14.937 12.814,14.389 12.827,13.758ZM12.575,16.014L11.403,16.014C11.588,16.846 11.834,17.368 11.989,17.64C12.144,17.368 12.389,16.846 12.575,16.014ZM15.744,15.41C16.001,14.908 16.161,14.349 16.202,13.758L15.187,13.758C15.183,14.387 15.095,14.934 14.951,15.41L15.744,15.41ZM15.37,10.898C14.896,10.258 14.25,9.754 13.499,9.454C13.871,9.806 14.257,10.278 14.566,10.898L15.37,10.898ZM14.824,11.502C14.994,11.98 15.117,12.528 15.165,13.154L16.202,13.154C16.161,12.563 16.001,12.004 15.744,11.502L14.824,11.502ZM12.791,17.363C13.197,17.09 13.675,16.662 14.034,16.014L13.193,16.014C13.076,16.577 12.93,17.023 12.791,17.363ZM13.3,15.41L14.307,15.41C14.473,14.948 14.578,14.401 14.583,13.758L13.431,13.758C13.419,14.38 13.37,14.929 13.3,15.41ZM13.431,13.154L14.559,13.154C14.505,12.514 14.363,11.967 14.172,11.502L13.3,11.502C13.37,11.983 13.419,12.531 13.431,13.154ZM13.873,10.898C13.556,10.358 13.18,9.965 12.846,9.688C12.968,10.008 13.091,10.408 13.193,10.898L13.873,10.898ZM10.784,10.898C10.886,10.408 11.009,10.008 11.131,9.688C10.797,9.965 10.421,10.358 10.104,10.898L10.784,10.898ZM12.124,8.55C12.304,8.558 12.482,8.576 12.656,8.602L12.656,7.798L11.976,7.798L11.245,7.798L11.245,8.59C11.461,8.56 11.682,8.545 11.906,8.545L12.038,8.547C12.067,8.545 12.096,8.546 12.124,8.55ZM11.989,9.272C11.834,9.544 11.588,10.066 11.403,10.898L12.575,10.898C12.389,10.066 12.144,9.544 11.989,9.272ZM8.068,11.502C7.812,12.004 7.652,12.563 7.611,13.154L8.812,13.154C8.86,12.528 8.983,11.98 9.153,11.502L8.068,11.502ZM9.411,10.898C9.75,10.219 10.181,9.717 10.584,9.357C9.718,9.636 8.972,10.182 8.443,10.898L9.411,10.898Z"/>
                            </g>
                            <path d="M3.685,4.022C3.506,4.022 3.36,3.877 3.36,3.697C3.36,3.518 3.506,3.372 3.685,3.372L20.127,3.372C20.307,3.372 20.452,3.518 20.452,3.697C20.452,3.877 20.307,4.022 20.127,4.022L3.685,4.022Z"/>
                        </g>
                    </svg>
                    <div class="mood-count" id="partyCount"></div>
                </button>
                
                <button class="mood-button learning-mood" data-mood="learning">
                    <div class="mood-label">Learn Something</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <g transform="matrix(0.0345901,0,0,0.0345901,-5.53354,-4.88756)">
                            <path d="M675.901,200L354.896,200C326.841,200 304.097,222.743 304.097,250.799L304.097,679.616C304.073,685.675 305.031,691.697 306.934,697.45L306.934,698.666L310.447,707.042C312.646,711.252 315.321,715.195 318.418,718.796C319.427,719.988 320.51,721.116 321.66,722.174L325.038,725.416C328.639,728.513 332.582,731.188 336.792,733.387L345.304,737.035L346.52,737.035C352.413,739.181 358.624,740.322 364.894,740.413L415.287,740.413L415.287,793.103C415.263,795.841 416.928,798.312 419.475,799.318C421.977,800.407 424.894,799.813 426.771,797.832L461.222,763.381L495.673,797.832C496.912,799.117 498.617,799.848 500.402,799.859C501.293,800.049 502.213,800.049 503.104,799.859C505.598,798.81 507.203,796.349 507.157,793.644L507.157,740.413L675.901,740.413C686.944,740.413 695.896,731.461 695.896,720.418L695.896,220.536C696.194,209.497 687.487,200.306 676.448,200.008C676.266,200.002 676.083,200 675.901,200ZM682.386,720.417C682.386,723.998 679.483,726.902 675.901,726.902L506.752,726.902L506.752,686.371L682.386,686.371L682.386,720.417ZM493.241,740.412L493.241,776.755L466.22,749.734C463.565,747.229 459.418,747.229 456.763,749.734L429.742,776.755L429.742,686.371L493.24,686.371L493.24,740.412L493.241,740.412ZM499.996,672.861L387.591,672.861C383.86,672.861 380.836,675.885 380.836,679.616C380.908,683.317 383.891,686.299 387.591,686.371L415.287,686.371L415.287,726.902L364.894,726.902C360.308,726.862 355.753,726.133 351.384,724.74L346.79,723.119L344.628,722.308C339.631,720.161 335.056,717.142 331.118,713.391C329.58,711.897 328.179,710.27 326.93,708.527C325.055,705.841 323.513,702.938 322.336,699.88L321.39,697.989C321.39,696.503 320.174,694.882 319.769,693.395C318.386,689.023 317.657,684.47 317.607,679.885C317.458,667.201 322.312,654.97 331.117,645.839C340.148,637.05 352.291,632.193 364.893,632.329L679.143,632.329C680.857,632.253 682.309,633.581 682.385,635.295C682.389,635.387 682.389,635.479 682.385,635.571L682.385,672.859L499.996,672.859L499.996,672.861ZM317.607,250.799C317.681,230.236 334.332,213.585 354.895,213.511L675.9,213.511C679.406,213.436 682.31,216.217 682.385,219.723C682.387,219.814 682.387,219.905 682.385,219.996L682.385,618.82L364.893,618.82C348.762,618.774 333.287,625.198 321.93,636.654C320.386,638.18 318.942,639.805 317.607,641.518L317.607,250.799Z"/>
                            <path d="M454.467,498.578L454.467,540.46C454.48,565.605 474.876,585.979 500.021,585.965C525.147,585.952 545.513,565.586 545.526,540.46L545.526,498.983C551.257,484.509 557.844,470.388 565.251,456.696C575.536,440.224 582.383,421.841 585.381,402.655C583.506,355.535 543.787,318.858 496.668,320.733C452.178,322.504 416.517,358.165 414.746,402.655C417.744,421.842 424.591,440.224 434.876,456.696C442.238,470.252 448.78,484.238 454.467,498.578ZM499.996,331.185C539.534,331.184 571.648,363.118 571.871,402.655C568.463,419.257 562.152,435.128 553.227,449.536C546.202,462.719 539.844,476.246 534.178,490.067L518.911,490.067L530.665,447.51C531.692,444.001 529.68,440.324 526.171,439.297C526.138,439.287 526.105,439.278 526.072,439.269C522.46,438.313 518.744,440.411 517.696,443.998L504.186,490.068L494.459,490.068L480.949,443.998C479.979,440.267 476.168,438.029 472.437,438.999C468.706,439.969 466.468,443.78 467.438,447.51L479.327,490.067L466.222,490.067C460.555,476.246 454.197,462.719 447.172,449.536C438.152,435.146 431.749,419.275 428.258,402.655C428.406,363.139 460.481,331.185 499.996,331.185ZM532.016,540.46C532.015,558.144 517.678,572.478 499.994,572.477C482.312,572.476 467.978,558.142 467.977,540.46L467.977,536.002L532.016,536.002L532.016,540.46ZM532.016,522.491L467.977,522.491L467.977,504.117L532.016,504.117L532.016,522.491Z"/>
                            <path d="M499.996,301.598C503.727,301.601 506.754,298.579 506.757,294.848C506.757,294.756 506.755,294.664 506.752,294.572L506.752,264.984C506.752,261.253 503.728,258.229 499.997,258.229C496.266,258.229 493.242,261.253 493.242,264.984L493.242,294.572C493.167,298.377 496.19,301.522 499.995,301.597C499.995,301.598 499.996,301.598 499.996,301.598Z"/>
                            <path d="M435.147,309.704C436.177,312.33 438.677,314.086 441.497,314.162L443.929,314.162C447.381,312.838 449.128,308.984 447.847,305.515L437.174,276.198C435.831,272.691 431.899,270.937 428.392,272.28C424.885,273.623 423.131,277.555 424.474,281.062L435.147,309.704Z"/>
                            <path d="M556.199,313.757L558.496,313.757C561.34,313.756 563.879,311.973 564.846,309.299L575.654,281.062C576.854,277.523 575.073,273.664 571.601,272.28C568.094,271.013 564.224,272.827 562.954,276.333L552.281,305.245C551.088,308.674 552.818,312.434 556.199,313.757Z"/>
                        </g>
                    </svg>
                    <div class="mood-count" id="learningCount"></div>
                </button>
                
                <button class="mood-button family-mood" data-mood="family">
                    <div class="mood-label">Family Fun</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <g transform="matrix(1,0,0,1,0,-0.546666)">
                            <g transform="matrix(1.363,0,0,1.363,-1.77493,-4.58072)">
                                <path d="M17.164,9.697C18.226,10.525 18.91,11.816 18.91,13.266C18.91,15.762 16.884,17.788 14.389,17.788C12.401,17.788 10.712,16.502 10.106,14.718C9.501,16.502 7.811,17.788 5.824,17.788C3.328,17.788 1.302,15.762 1.302,13.266C1.302,12.735 1.394,12.224 1.563,11.75L1.564,11.749C2.188,9.999 3.86,8.745 5.824,8.745C6.351,8.745 6.857,8.835 7.328,9.002C7.315,8.802 7.316,8.58 7.356,8.408C7.475,7.9 7.854,7.581 8.333,7.581C8.77,7.58 9.147,7.906 9.28,8.178C9.499,8.626 9.243,8.961 9.191,9.024C9.191,9.024 9.067,9.116 8.97,9.113C8.88,9.11 8.674,9.006 8.674,8.846C8.674,8.757 8.746,8.655 8.746,8.655C8.746,8.655 8.818,8.55 8.76,8.433C8.7,8.309 8.532,8.159 8.334,8.159C8.123,8.159 7.971,8.317 7.919,8.54C7.867,8.76 7.904,9.085 7.933,9.267L7.965,9.284C8.964,9.823 9.737,10.726 10.106,11.815C10.389,10.982 10.908,10.257 11.583,9.722C11.451,9.531 11.275,9.214 11.215,8.819C11.196,8.696 11.175,8.439 11.209,8.196C11.237,7.999 11.305,7.812 11.416,7.682C11.656,7.402 11.973,7.304 12.33,7.359C13.094,7.478 13.989,8.217 14.365,8.555C14.741,8.217 15.636,7.478 16.4,7.359C16.757,7.304 17.074,7.402 17.314,7.682C17.425,7.812 17.492,7.999 17.521,8.196C17.555,8.439 17.534,8.696 17.515,8.819C17.458,9.197 17.293,9.504 17.164,9.697ZM12.057,9.393C12.567,9.085 13.143,8.875 13.758,8.789C13.615,8.668 13.439,8.529 13.247,8.397C12.933,8.183 12.574,7.982 12.241,7.93C12.092,7.907 11.956,7.94 11.855,8.058C11.809,8.112 11.793,8.195 11.782,8.278C11.756,8.455 11.773,8.642 11.787,8.732C11.831,9.024 11.963,9.258 12.057,9.393ZM14.978,8.783C15.596,8.864 16.174,9.069 16.687,9.373C16.78,9.235 16.901,9.01 16.943,8.732C16.957,8.642 16.974,8.455 16.948,8.278C16.937,8.195 16.921,8.112 16.874,8.058C16.774,7.94 16.638,7.907 16.488,7.93C16.156,7.982 15.797,8.183 15.483,8.397C15.294,8.527 15.121,8.663 14.978,8.783ZM14.391,9.724C14.119,10.232 13.615,10.994 12.767,11.728C12.235,12.189 10.875,13.126 10.449,13.417C10.528,15.524 12.263,17.21 14.389,17.21C16.544,17.21 18.297,15.478 18.332,13.331C17.938,13.092 16.812,12.39 16.072,11.741C15.148,10.931 14.653,10.221 14.391,9.724ZM18.279,12.619C17.995,10.9 16.596,9.554 14.851,9.35C15.061,9.782 15.511,10.481 16.453,11.306C17.006,11.791 17.782,12.305 18.279,12.619ZM9.729,12.723C9.575,11.607 8.954,10.64 8.069,10.026C8.067,10.432 8.15,11.07 8.59,11.677C8.904,12.111 9.378,12.483 9.729,12.723ZM7.361,9.634C6.888,9.434 6.369,9.323 5.824,9.323C4.264,9.323 2.915,10.23 2.276,11.545C2.856,11.512 3.938,11.398 5.026,11.006C6.328,10.538 7.037,9.96 7.361,9.634ZM2.046,12.133C1.938,12.492 1.88,12.872 1.88,13.266C1.88,15.443 3.647,17.21 5.824,17.21C7.945,17.21 9.678,15.53 9.763,13.43C9.424,13.224 8.605,12.684 8.121,12.016C7.682,11.408 7.537,10.774 7.502,10.292C7.065,10.664 6.341,11.148 5.221,11.55C3.883,12.032 2.553,12.118 2.046,12.133ZM13.935,9.349C12.162,9.553 10.746,10.934 10.488,12.689C11.06,12.294 11.978,11.647 12.389,11.291C13.234,10.559 13.706,9.8 13.935,9.349Z"/>
                            </g>
                            <g transform="matrix(1.12563,0,0,1.12563,-1.19366,-1.59239)">
                                <path d="M8.586,16.005C8.242,16.375 7.519,16.965 6.398,16.965C4.782,16.965 3.909,15.728 3.909,15.728C3.797,15.571 3.834,15.352 3.992,15.24C4.149,15.128 4.368,15.165 4.48,15.323C4.48,15.323 5.156,16.265 6.398,16.265C7.459,16.265 8.053,15.573 8.196,15.384C8.089,15.028 8.194,14.751 8.195,14.745C8.22,14.581 8.343,14.447 8.563,14.464C8.87,14.488 8.887,14.851 8.887,14.851C8.887,14.851 8.843,15.153 8.929,15.32C9.034,15.519 9.247,15.641 9.288,15.665C9.288,15.665 9.593,15.78 9.5,16.07C9.404,16.369 9.126,16.325 9.126,16.325C9.059,16.325 8.94,16.289 8.887,16.257C8.844,16.232 8.721,16.145 8.586,16.005Z"/>
                            </g>
                            <g transform="matrix(1.12563,0,0,1.12563,10.6869,-1.59239)">
                                <path d="M3.909,15.728C3.797,15.571 3.834,15.352 3.992,15.24C4.149,15.128 4.368,15.165 4.48,15.323C4.48,15.323 5.156,16.265 6.398,16.265C7.627,16.265 8.229,15.337 8.229,15.337C8.333,15.174 8.55,15.126 8.713,15.23C8.876,15.334 8.923,15.551 8.819,15.714C8.819,15.714 8.029,16.965 6.398,16.965C4.782,16.965 3.909,15.728 3.909,15.728Z"/>
                            </g>
                            <g transform="matrix(2.22363,0,0,2.22363,-18.6797,-16.0402)">
                                <circle cx="15.696" cy="13.021" r="0.264"/>
                            </g>
                            <g transform="matrix(2.22363,0,0,2.22363,-30.6315,-16.0402)">
                                <circle cx="15.696" cy="13.021" r="0.264"/>
                            </g>
                            <g transform="matrix(2.22363,0,0,2.22363,-27.384,-16.0402)">
                                <path d="M15.431,13.021C15.431,12.875 15.55,12.757 15.696,12.757C15.841,12.757 15.96,12.875 15.96,13.021L15.431,13.021Z"/>
                            </g>
                            <g transform="matrix(2.22363,0,0,2.22363,-15.4332,-16.0402)">
                                <circle cx="15.696" cy="13.021" r="0.264"/>
                            </g>
                        </g>
                    </svg>
                    <div class="mood-count" id="familyCount"></div>
                </button>
                
                <button class="mood-button chill-mood" data-mood="chill">
                    <div class="mood-label">Chill & Drinks</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <g transform="matrix(0.0706377,0,0,0.0706377,-0.499287,-0.580567)">
                            <path d="M157.9,301.136L158.401,172.62L91.871,99.632L48.711,52.283C46.843,50.234 46.361,47.276 47.481,44.74C48.601,42.204 51.112,40.568 53.884,40.568L300.015,40.568C302.777,40.568 305.282,42.193 306.407,44.716C307.533,47.239 307.069,50.188 305.223,52.244L197.174,172.601L197.174,301.136L227.357,301.136C231.357,301.136 234.605,304.384 234.605,308.384C234.605,312.385 231.357,315.632 227.357,315.632L128.466,315.632C124.465,315.632 121.218,312.385 121.218,308.384C121.218,304.384 124.465,301.136 128.466,301.136L157.9,301.136ZM107.694,96.209L170.585,165.204C171.767,166.5 172.419,168.193 172.412,169.947L171.901,300.802L183.174,300.802L183.174,169.92C183.174,168.193 183.812,166.528 184.965,165.243L236.737,107.575C235.129,107.703 233.506,107.769 231.894,107.753C219.025,107.62 211.921,105.803 199.454,101.562C188.256,97.753 162.669,88.226 141.26,88.313C125.145,88.378 113.943,92.803 107.694,96.209ZM252.568,89.94L284.323,54.568L69.737,54.568L98.035,85.612C105.351,81.062 119.716,74.4 141.203,74.313C164.269,74.22 191.898,84.204 203.963,88.308C214.759,91.98 220.894,93.639 232.038,93.753C240.427,93.84 249.159,91.127 252.568,89.94Z"/>
                        </g>
                    </svg>
                    <div class="mood-count" id="chillCount"></div>
                </button>
                
                <button class="mood-button arts-mood" data-mood="arts">
                    <div class="mood-label">Arts & Culture</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <g transform="matrix(1.13048,0,0,1.13048,-1.66788,-0.637494)">
                            <path d="M17.353,16.781C17.061,17.055 16.609,17.444 16.071,17.783C15.13,18.374 13.149,19.447 11.564,19.679C10.707,19.804 8.739,20.227 6.695,19.282C4.628,18.326 3.544,16.839 3.322,13.546C3.103,10.293 5.22,7.4 6.383,6.389C7.543,5.38 9.437,4.014 11.74,3.861C13.211,3.764 14.202,3.906 15.228,4.848C16.208,5.747 16.446,7.092 16.2,7.983C16.044,8.55 15.641,9.357 14.978,9.887C14.472,10.292 14.32,10.768 14.347,11.119C14.379,11.532 14.619,11.885 15.082,11.976C15.264,12.012 15.465,11.921 15.659,11.81C16.036,11.594 16.381,11.265 16.549,11.129C16.7,11.006 16.921,10.928 17.136,10.888C17.233,10.87 17.328,10.858 17.411,10.852C17.598,9.723 17.852,8.879 17.974,8.513C17.791,8.41 17.606,8.257 17.427,8.03C17.091,7.601 16.851,7.123 16.822,5.672C16.77,3.162 18.482,2.566 18.713,2.497C18.682,2.508 18.946,2.452 19.008,2.49C19.164,2.585 19.114,2.806 19.114,2.806L19.114,2.815C19.108,2.889 19.084,3.28 19.154,3.708C19.201,4 19.289,4.312 19.473,4.537C19.59,4.68 19.757,4.8 19.93,4.93C20.14,5.088 20.36,5.257 20.544,5.47C20.714,5.667 20.827,5.961 20.862,6.294C20.911,6.753 20.815,7.284 20.575,7.688C20.369,8.036 20.096,8.297 19.8,8.469C20.082,9.198 20.758,11.201 20.727,13.573C20.704,15.294 20.589,16.283 20.476,16.965C20.339,17.784 19.632,18.426 18.861,18.424C18.531,18.422 18.232,18.267 17.991,18.034C17.667,17.72 17.452,17.269 17.393,16.975C17.381,16.914 17.367,16.851 17.353,16.781ZM17.321,11.465C17.297,11.469 17.272,11.473 17.247,11.478C17.131,11.499 17.008,11.53 16.926,11.595C16.744,11.743 16.367,12.097 15.957,12.331C15.627,12.52 15.275,12.625 14.967,12.565C14.206,12.416 13.801,11.843 13.749,11.165C13.711,10.673 13.893,9.987 14.603,9.419C15.157,8.975 15.491,8.298 15.622,7.824C15.821,7.103 15.615,6.018 14.822,5.29C13.93,4.471 13.059,4.375 11.78,4.46C9.626,4.602 7.862,5.898 6.777,6.842C5.694,7.784 3.717,10.476 3.921,13.506C4.122,16.497 5.07,17.869 6.947,18.737C8.848,19.616 10.68,19.201 11.477,19.085C12.982,18.865 14.859,17.836 15.751,17.275C16.554,16.77 17.148,16.147 17.247,16.041C17.201,15.523 17.17,14.704 17.19,13.287C17.199,12.64 17.249,12.026 17.321,11.465ZM17.964,11.196C17.87,11.825 17.8,12.536 17.79,13.296C17.752,15.997 17.899,16.446 17.981,16.857C18.023,17.064 18.179,17.381 18.408,17.602C18.536,17.726 18.688,17.823 18.864,17.824C19.359,17.825 19.796,17.393 19.884,16.867C19.995,16.203 20.105,15.24 20.127,13.565C20.157,11.287 19.504,9.366 19.241,8.686C19.149,8.704 19.058,8.714 18.969,8.716C18.843,8.719 18.699,8.72 18.544,8.7C18.423,9.064 18.149,9.969 17.967,11.178C17.966,11.184 17.965,11.19 17.964,11.196ZM19.413,7.999C19.665,7.893 19.889,7.668 20.059,7.382C20.236,7.085 20.301,6.694 20.265,6.357C20.244,6.159 20.191,5.979 20.09,5.862C19.901,5.643 19.664,5.482 19.453,5.322C19.283,5.192 19.127,5.062 19.008,4.917C18.76,4.614 18.626,4.198 18.562,3.805C18.53,3.609 18.515,3.419 18.509,3.257C18.063,3.542 17.392,4.213 17.421,5.66C17.446,6.886 17.615,7.297 17.899,7.659C18.266,8.127 18.68,8.123 18.955,8.117C19.036,8.115 19.118,8.099 19.202,8.079C19.324,8.051 19.354,8.023 19.413,7.999Z"/>
                        </g>
                        <g transform="matrix(1.0341,0,0,1.0754,-0.787957,-0.263948)">
                            <path d="M10.699,6.467C11.751,6.467 12.595,7.248 12.595,8.197C12.595,9.145 11.751,9.926 10.699,9.926C9.646,9.926 8.802,9.145 8.802,8.197C8.802,7.248 9.646,6.467 10.699,6.467ZM10.699,7.098C10.02,7.098 9.458,7.584 9.458,8.197C9.458,8.809 10.02,9.295 10.699,9.295C11.378,9.295 11.94,8.809 11.94,8.197C11.94,7.584 11.378,7.098 10.699,7.098Z"/>
                        </g>
                        <g transform="matrix(1.0341,0,0,1.0754,-4.96061,3.34128)">
                            <path d="M10.699,6.467C11.751,6.467 12.595,7.248 12.595,8.197C12.595,9.145 11.751,9.926 10.699,9.926C9.646,9.926 8.802,9.145 8.802,8.197C8.802,7.248 9.646,6.467 10.699,6.467ZM10.699,7.098C10.02,7.098 9.458,7.584 9.458,8.197C9.458,8.809 10.02,9.295 10.699,9.295C11.378,9.295 11.94,8.809 11.94,8.197C11.94,7.584 11.378,7.098 10.699,7.098Z"/>
                        </g>
                        <g transform="matrix(1.0341,0,0,1.0754,-4.49495,8.22529)">
                            <path d="M10.699,6.467C11.751,6.467 12.595,7.248 12.595,8.197C12.595,9.145 11.751,9.926 10.699,9.926C9.646,9.926 8.802,9.145 8.802,8.197C8.802,7.248 9.646,6.467 10.699,6.467ZM10.699,7.098C10.02,7.098 9.458,7.584 9.458,8.197C9.458,8.809 10.02,9.295 10.699,9.295C11.378,9.295 11.94,8.809 11.94,8.197C11.94,7.584 11.378,7.098 10.699,7.098Z"/>
                        </g>
                        <g transform="matrix(1.0341,0,0,1.0754,-0.263292,9.51543)">
                            <path d="M10.699,6.467C11.751,6.467 12.595,7.248 12.595,8.197C12.595,9.145 11.751,9.926 10.699,9.926C9.646,9.926 8.802,9.145 8.802,8.197C8.802,7.248 9.646,6.467 10.699,6.467ZM10.699,7.098C10.02,7.098 9.458,7.584 9.458,8.197C9.458,8.809 10.02,9.295 10.699,9.295C11.378,9.295 11.94,8.809 11.94,8.197C11.94,7.584 11.378,7.098 10.699,7.098Z"/>
                        </g>
                    </svg>
                    <div class="mood-count" id="artsCount"></div>
                </button>
                
                <button class="mood-button games-mood" data-mood="games">
                    <div class="mood-label">Games</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <g transform="matrix(0.00639141,0.0317543,-0.0317543,0.00639141,20.2193,1.37561)">
                            <path d="M271.485,0L0,156.742L0,470.225L271.485,626.967L542.969,470.225L542.969,156.742L271.485,0ZM278.328,22.626L499.946,150.578L278.328,125.546L278.328,22.626ZM524.976,167.178L429.237,391.209L284.191,139.981L524.976,167.178ZM418.301,399.638L124.669,399.638L271.485,145.345L418.301,399.638ZM264.642,22.626L264.642,125.546L43.023,150.578L264.642,22.626ZM258.779,139.981L113.732,391.21L17.993,167.178L258.779,139.981ZM16.174,197.747L104.116,403.532L16.174,453.138L16.174,197.747ZM23.151,464.915L110.952,415.389L243.972,592.407L23.151,464.915ZM126.518,413.323L416.452,413.323L271.485,606.238L126.518,413.323ZM298.997,592.407L432.018,415.388L519.818,464.914L298.997,592.407ZM526.795,453.138L438.854,403.533L526.795,197.749L526.795,453.138Z" fill-rule="nonzero"/>
                        </g>
                    </svg>
                    <div class="mood-count" id="gamesCount"></div>
                </button>
                
                <button class="mood-button comedy-mood" data-mood="comedy">
                    <div class="mood-label">Comedy</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <g transform="matrix(0.0179094,0,0,0.0172242,-23.4439,6.34216)">
                            <g>
                                <g transform="matrix(14.1567,0,0,14.1567,7.06828,8.21894)">
                                    <path d="M114.053,24.944L164.162,24.944C164.712,24.944 165.237,25.17 165.615,25.569C165.993,25.968 166.189,26.505 166.159,27.054C166.159,27.054 164.841,51.583 139.447,51.583C114.112,51.583 112.06,27.113 112.06,27.113C112.012,26.556 112.201,26.003 112.58,25.591C112.958,25.179 113.493,24.944 114.053,24.944ZM158.782,37.385C160.661,34.189 161.506,30.971 161.88,28.944L116.406,28.944C116.843,30.961 117.775,34.122 119.702,37.271C121.609,36.489 124.983,35.634 129.883,36.281C134.677,36.914 137.537,38.427 139.107,39.608C140.678,38.427 143.538,36.914 148.332,36.281C153.471,35.602 156.932,36.576 158.782,37.385ZM122.213,40.637C125.684,44.462 131.08,47.583 139.447,47.583C147.726,47.583 152.997,44.519 156.35,40.745C154.861,40.255 152.371,39.782 148.855,40.246C142.696,41.06 140.74,43.505 140.74,43.505C140.365,44.035 139.757,44.351 139.107,44.351C138.458,44.351 137.849,44.035 137.475,43.505C137.475,43.505 135.519,41.06 129.359,40.246C126.104,39.816 123.728,40.19 122.213,40.637Z"/>
                                </g>
                                <g transform="matrix(14.6828,0,0,14.6828,-56.1713,-33.1561)">
                                    <path d="M101.875,34.005C100.157,33.702 98.763,32.711 97.988,31.959C97.93,31.903 97.876,31.843 97.826,31.78C96.646,30.306 94.922,26.878 97.424,23.545C98.038,22.726 99.294,21.862 100.87,21.105C102.652,1.755 118.947,-13.419 138.758,-13.419C158.619,-13.419 174.946,1.833 176.658,21.253C178.093,21.974 179.228,22.779 179.803,23.545C182.304,26.878 180.581,30.306 179.401,31.78C179.351,31.843 179.296,31.903 179.239,31.959C178.51,32.666 177.234,33.584 175.656,33.944C171.497,50.447 156.545,62.679 138.758,62.679C120.993,62.679 106.056,50.477 101.875,34.005ZM171.781,33.522C171.548,33.414 171.315,33.288 171.079,33.145C170.055,32.519 168.884,31.022 167.86,29.144C165.861,25.477 164.158,20.363 164.158,20.363C163.938,19.702 164.092,18.974 164.561,18.458C165.029,17.943 165.739,17.72 166.419,17.875C166.419,17.875 169.446,18.571 172.585,19.624C170.161,3.122 155.929,-9.562 138.758,-9.562C121.622,-9.562 107.413,3.07 104.945,19.523C107.973,18.527 110.808,17.875 110.808,17.875C111.487,17.72 112.197,17.943 112.666,18.458C113.134,18.974 113.288,19.702 113.069,20.363C113.069,20.363 111.366,25.477 109.366,29.144C108.342,31.022 107.172,32.519 106.147,33.145C105.998,33.236 105.849,33.32 105.701,33.396C109.576,48.026 122.916,58.822 138.758,58.822C154.554,58.822 167.863,48.088 171.781,33.522ZM176.464,29.275L176.466,29.273C176.976,28.6 177.736,27.216 176.718,25.86C176.276,25.271 175.206,24.785 173.998,24.269C172.437,23.603 170.624,23.015 169.079,22.564C169.675,24.059 170.434,25.807 171.246,27.298C171.875,28.45 172.461,29.47 173.089,29.853C174.538,30.738 175.843,29.847 176.464,29.275ZM103.419,24.189L103.228,24.269C102.021,24.785 100.951,25.271 100.509,25.86C99.49,27.217 100.252,28.602 100.762,29.275L100.764,29.276C101.386,29.849 102.69,30.737 104.137,29.853C104.766,29.47 105.352,28.45 105.98,27.298C106.793,25.807 107.551,24.059 108.148,22.564C106.682,22.992 104.975,23.543 103.47,24.168L103.419,24.189Z"/>
                                </g>
                                <g transform="matrix(14.1567,0,0,14.1567,7.06828,8.21894)">
                                    <path d="M120.775,5.675C119.992,4.896 119.989,3.628 120.768,2.846C121.547,2.064 122.814,2.061 123.597,2.84L132.971,12.171C133.545,12.742 133.717,13.603 133.408,14.352C133.099,15.1 132.369,15.589 131.56,15.589L119.01,15.589C117.906,15.589 117.01,14.692 117.01,13.589C117.01,12.485 117.906,11.589 119.01,11.589L126.716,11.589L120.775,5.675Z"/>
                                </g>
                                <g transform="matrix(-14.1567,0,0,14.1567,3945.69,8.21894)">
                                    <path d="M123.597,2.84C122.814,2.061 121.547,2.064 120.768,2.846C119.989,3.628 119.992,4.896 120.775,5.675L126.716,11.589L119.01,11.589C117.906,11.589 117.01,12.485 117.01,13.589C117.01,14.692 117.906,15.589 119.01,15.589L131.56,15.589C132.369,15.589 133.099,15.1 133.408,14.352C133.717,13.603 133.545,12.742 132.971,12.171L123.597,2.84Z"/>
                                </g>
                            </g>
                        </g>
                    </svg>
                    <div class="mood-count" id="comedyCount"></div>
                </button>
            </div>
            </div> <!-- End mood-content -->
        
        <!-- Quick Filters -->
        <div class="quick-filters-wrapper">
            <!-- Mobile Collapsible Button -->
            <button class="filters-toggle-btn mobile-only" id="filtersToggleBtn">
                <span class="filters-toggle-text">
                    <svg class="filter-funnel-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 8px;">
                        <path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"/>
                    </svg>
                    Filters
                </span>
                <span class="filters-toggle-icon">â–¼</span>
            </button>
            
            <!-- Filters Content (collapsible on mobile) -->
            <div class="quick-filters" id="filtersContent">
            <div class="filter-group">
                <select id="locationFilter" class="filter-dropdown">
                    <option value="">ðŸ“ All Locations</option>
                </select>
            </div>
            
            <div class="filter-group">
                <select id="whenFilter" class="filter-dropdown">
                    <option value="all">ðŸ“… All Events</option>
                    <option value="today">Today</option>
                    <option value="tomorrow">Tomorrow</option>
                    <option value="weekend">This Weekend</option>
                    <option value="week">This Week</option>
                    <option value="month">This Month</option>
                </select>
            </div>
            
            <div class="filter-group">
                <select id="venueFilter" class="filter-dropdown">
                    <option value="">ðŸ¢ All Venues</option>
                </select>
            </div>
        </div> <!-- End quick-filters -->
        </div> <!-- End quick-filters-wrapper -->
        
        <!-- Active Filters Pills -->
        <div class="active-filters" id="activeFilters" style="display: none;">
            <div class="active-filters-header">
                <div class="active-filters-label">Active Filters:</div>
                <button class="clear-all-btn" id="clearAllBtn">Clear All</button>
            </div>
            <div class="filter-pills" id="filterPills"></div>
        </div>
        
        <div class="stats" id="stats"></div>
        
        <div class="events-grid" id="eventsGrid"></div>
        
        <div class="no-events" id="noEvents" style="display: none;">
            No events found matching your filters. Try adjusting your search!
        </div>
        
        <!-- Footer CTA -->
        <div class="footer-cta">
            <p class="footer-cta-text">Know an event we're missing?</p>
            <button class="footer-cta-button" id="footerCtaBtn">
                <span>ðŸ“</span>
                <span>Submit an Event</span>
            </button>
        </div>
    </div>
    
    <!-- Floating Feedback Button -->
    <button class="feedback-button" id="feedbackBtn">
        <span class="feedback-button-emoji">ðŸ’¬</span>
        <span class="feedback-button-text">Feedback</span>
    </button>
    
    <!-- Feedback Modal -->
    <div class="feedback-modal-overlay" id="feedbackModal" style="display: none;">
        <div class="feedback-modal-content" onclick="event.stopPropagation()">
            <button class="feedback-modal-close" id="closeModalBtn" aria-label="Close">âœ•</button>
            <iframe 
                src="https://form.jotform.com/260103837207046"
                class="feedback-modal-iframe"
                scrolling="yes">
            </iframe>
        </div>
    </div>
    
    <script>
        let allEvents = [];
        let filteredEvents = [];
        let activeFilters = {
            mood: new Set(),
            venue: '',
            location: '',
            when: 'all',
            search: '',
            exactTag: ''  // For exact tag matching when clicking tags
        };
        
        // Mood to tag mapping
        const moodMap = {
            music: ['Music', 'Live Music', 'Dance/Music', 'Jazz'],
            party: ['Nightlife', '21+', 'DJ', 'Dance'],
            learning: ['Educational', 'Books & Literary', 'Books', 'Literary', 'Cafe', 'Bookstore'],
            family: ['All Ages', 'Family Friendly', 'Family Fun', 'Games'],
            chill: ['Bar', 'Pub', 'Food & Drink', 'Brewery', 'Restaurant'],
            arts: ['Arts', 'Performance', 'Community', 'Books & Literary', 'Historic'],  // Removed 'Comedy'
            games: ['Games', 'Game Night', 'Board Games', 'Puzzles', 'Mahjongg'],
            comedy: ['Comedy', 'Stand-Up', 'Improv', 'Comic', 'Comedian']  // New comedy mood
        };
        
        // Mood Toggle - All screen sizes (desktop/tablet/mobile)
        const moodToggleBtn = document.getElementById('moodToggleBtn');
        const moodContent = document.getElementById('moodContent');
        
        if (moodToggleBtn && moodContent) {
            moodToggleBtn.addEventListener('click', () => {
                moodToggleBtn.classList.toggle('expanded');
                moodContent.classList.toggle('expanded');
            });
        }
        
        // Mobile only: Filters Toggle and Sticky Search
        if (window.innerWidth <= 640) {
            // Filters Toggle
            const filtersToggleBtn = document.getElementById('filtersToggleBtn');
            const filtersContent = document.getElementById('filtersContent');
            
            if (filtersToggleBtn && filtersContent) {
                filtersToggleBtn.addEventListener('click', () => {
                    filtersToggleBtn.classList.toggle('expanded');
                    filtersContent.classList.toggle('expanded');
                });
            }
        }
        
        // Scroll to first event after filter selection (mobile only)
        function scrollToResults() {
            if (window.innerWidth <= 640) {
                const firstEvent = document.querySelector('.event-card');
                if (firstEvent) {
                    setTimeout(() => {
                        const searchBar = document.querySelector('.search-section');
                        const searchBarHeight = searchBar ? searchBar.offsetHeight : 0;
                        const offset = searchBarHeight + 32; // Reduced from 80 - sticky position needs less offset
                        
                        const elementPosition = firstEvent.getBoundingClientRect().top + window.pageYOffset;
                        const offsetPosition = elementPosition - offset;
                        
                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });
                    }, 100);
                }
            }
        }
        
        // Load events
        async function loadEvents() {
            try {
                const response = await fetch('all_boulder_events.json');
                const data = await response.json();
                allEvents = data.events;
                
                initializeFilters(data.tags);
                filteredEvents = allEvents;
                renderEvents();
                updateStats();
                updateMoodCounts();
                updateStatusBanner();
            } catch (error) {
                console.error('Error loading events:', error);
                document.getElementById('noEvents').style.display = 'block';
                document.getElementById('noEvents').textContent = 'Error loading events.';
            }
        }
        
        function initializeFilters(tags) {
            // Venue dropdown
            const venueFilter = document.getElementById('venueFilter');
            tags.venues.forEach(venue => {
                const option = document.createElement('option');
                option.value = venue;
                option.textContent = venue;
                venueFilter.appendChild(option);
            });
            
            // Location dropdown
            const locationFilter = document.getElementById('locationFilter');
            tags.locations.forEach(location => {
                const option = document.createElement('option');
                option.value = location;
                option.textContent = location;
                locationFilter.appendChild(option);
            });
        }
        
        // Mood button clicks - Only one mood active at a time
        document.querySelectorAll('.mood-button').forEach(button => {
            button.addEventListener('click', () => {
                const mood = button.dataset.mood;
                const isCurrentlyActive = button.classList.contains('active');
                
                // If clicking the same mood, deactivate it
                if (isCurrentlyActive) {
                    activeFilters.mood.clear();
                    button.classList.remove('active');
                } else {
                    // Clear all other mood buttons and activate only this one
                    document.querySelectorAll('.mood-button').forEach(b => b.classList.remove('active'));
                    activeFilters.mood.clear();
                    activeFilters.mood.add(mood);
                    button.classList.add('active');
                }
                
                activeFilters.exactTag = '';  // Clear exact tag filter
                applyFilters();
                scrollToResults();
            });
        });
        
        // Smart Status Banner click
        // Status banner click handlers (both desktop and mobile)
        function handleStatusBannerClick() {
            // Get the current status
            const statusText = document.getElementById('statusText').textContent;
            
            // Determine which filter to apply based on the banner text
            let whenFilter = 'all';
            if (statusText.includes('today')) {
                whenFilter = 'today';
            } else if (statusText.includes('this week')) {
                whenFilter = 'week';
            }
            
            // Clear all filters first
            activeFilters = {
                mood: new Set(),
                venue: '',
                location: '',
                when: whenFilter,
                search: '',
                exactTag: ''
            };
            
            // Reset UI
            document.querySelectorAll('.mood-button.active').forEach(b => b.classList.remove('active'));
            document.getElementById('locationFilter').value = '';
            document.getElementById('venueFilter').value = '';
            document.getElementById('whenFilter').value = activeFilters.when;
            document.getElementById('searchBox').value = '';
            
            applyFilters();
            scrollToResults();
        }
        
        document.getElementById('statusBanner').addEventListener('click', handleStatusBannerClick);
        document.getElementById('mobileStatusBanner').addEventListener('click', handleStatusBannerClick);
        
        // Update status banner with event counts
        function updateStatusBanner() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            // Count today's events
            const todayEvents = allEvents.filter(event => {
                if (!event.normalized_date) return false;
                const eventDate = new Date(event.normalized_date);
                return eventDate.toDateString() === today.toDateString();
            });
            
            const statusBanner = document.getElementById('statusBanner');
            const mobileStatusBanner = document.getElementById('mobileStatusBanner');
            
            let bannerHTML = '';
            
            // Always show today's count, and if 0, also show this week's count
            if (todayEvents.length > 0) {
                bannerHTML = 'ðŸŽ‰ <span class="status-count">' + todayEvents.length + '</span> <span id="statusText">events today!</span>';
            } else {
                // Count events in next 7 days (excluding today since we know it's 0)
                const tomorrow = new Date(today);
                tomorrow.setDate(tomorrow.getDate() + 1);
                const weekEnd = new Date(today);
                weekEnd.setDate(weekEnd.getDate() + 7);
                const next7DaysEvents = allEvents.filter(event => {
                    if (!event.normalized_date) return false;
                    const eventDate = new Date(event.normalized_date);
                    return eventDate >= tomorrow && eventDate <= weekEnd;
                });
                bannerHTML = 'ðŸ“… <span class="status-count">' + next7DaysEvents.length + '</span> <span id="statusText">events this week!</span>';
            }
            
            // Update both banners
            if (statusBanner) statusBanner.innerHTML = bannerHTML;
            if (mobileStatusBanner) mobileStatusBanner.innerHTML = bannerHTML;
        }
        
        // Venue dropdown
        document.getElementById('venueFilter').addEventListener('change', (e) => {
            activeFilters.venue = e.target.value;
            applyFilters();
            scrollToResults();
        });
        
        // Location dropdown
        document.getElementById('locationFilter').addEventListener('change', (e) => {
            activeFilters.location = e.target.value;
            applyFilters();
            scrollToResults();
        });
        
        // When filter
        document.getElementById('whenFilter').addEventListener('change', (e) => {
            activeFilters.when = e.target.value;
            applyFilters();
            scrollToResults();
        });
        
        // Search box
        // Search autocomplete
        const searchBox = document.getElementById('searchBox');
        const searchClearBtn = document.getElementById('searchClearBtn');
        const autocompleteDropdown = document.getElementById('searchAutocomplete');
        let selectedIndex = -1;
        let autocompleteItems = [];
        
        // Clear search function
        function clearSearch() {
            searchBox.value = '';
            searchClearBtn.style.display = 'none';
            hideAutocomplete();
            activeFilters.search = '';
            activeFilters.exactTag = '';
            applyFilters();
        }
        
        // Show/hide clear button based on input
        function updateClearButton() {
            searchClearBtn.style.display = searchBox.value.length > 0 ? 'block' : 'none';
        }
        
        // Clear button click handler
        searchClearBtn.addEventListener('click', () => {
            clearSearch();
            searchBox.focus();
        });
        
        // IMPORTANT: Clear search box on page load/refresh (don't persist search)
        searchBox.value = '';
        updateClearButton();
        
        // Select all text when search box is focused (easier to replace text)
        searchBox.addEventListener('focus', (e) => {
            if (e.target.value.length > 0) {
                e.target.select();
            }
        });
        
        // ESC key to clear search
        searchBox.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                clearSearch();
                searchBox.blur(); // Remove focus after clearing
                return;
            }
            
            // Continue with normal keyboard navigation...
        });
        
        // Input event handler for search
        searchBox.addEventListener('input', (e) => {
            const query = e.target.value.trim();
            
            // Update clear button visibility
            updateClearButton();
            
            if (query.length === 0) {
                hideAutocomplete();
                activeFilters.search = '';
                activeFilters.exactTag = '';
                applyFilters();
                return;
            }
            
            // Get matching suggestions
            const suggestions = getSearchSuggestions(query);
            
            if (suggestions.length > 0) {
                showAutocomplete(suggestions, query);
            } else {
                hideAutocomplete();
            }
            
            // Still apply live filtering
            activeFilters.search = query.toLowerCase();
            activeFilters.exactTag = '';  // Clear exact tag when typing
            applyFilters();
        });
        
        // Handle keyboard navigation in autocomplete
        searchBox.addEventListener('keydown', (e) => {
            // ESC was already handled above, skip it here
            if (e.key === 'Escape') {
                return;
            }
            
            const items = autocompleteDropdown.querySelectorAll('.autocomplete-item');
            
            if (e.key === 'ArrowDown') {
                e.preventDefault();
                selectedIndex = Math.min(selectedIndex + 1, items.length - 1);
                updateSelection(items);
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                selectedIndex = Math.max(selectedIndex - 1, -1);
                updateSelection(items);
            } else if (e.key === 'Enter') {
                e.preventDefault();
                if (selectedIndex >= 0 && items[selectedIndex]) {
                    items[selectedIndex].click();
                } else {
                    // Just apply the current search filter
                    hideAutocomplete();
                    scrollToResults();
                }
            } else if (e.key === 'Escape') {
                hideAutocomplete();
            }
        });
        
        // Close autocomplete when clicking outside
        document.addEventListener('click', (e) => {
            if (!searchBox.contains(e.target) && !autocompleteDropdown.contains(e.target)) {
                hideAutocomplete();
            }
        });
        
        function getSearchSuggestions(query) {
            const lowerQuery = query.toLowerCase();
            const suggestions = {
                venues: new Set(),
                locations: new Set(),
                tags: new Set(),
                events: []
            };
            
            // Collect matching venues, locations, tags, and events
            allEvents.forEach(event => {
                // Check venue match
                if (event.venue && event.venue.toLowerCase().includes(lowerQuery)) {
                    suggestions.venues.add(event.venue);
                }
                
                // Check location match
                if (event.location && event.location.toLowerCase().includes(lowerQuery)) {
                    suggestions.locations.add(event.location);
                }
                
                // Check tags match
                const allTags = [...(event.venue_type_tags || []), ...(event.event_type_tags || [])];
                allTags.forEach(tag => {
                    if (tag.toLowerCase().includes(lowerQuery)) {
                        suggestions.tags.add(tag);
                    }
                });
                
                // Check event title match
                if (event.title && event.title.toLowerCase().includes(lowerQuery)) {
                    suggestions.events.push({
                        title: event.title,
                        venue: event.venue,
                        type: 'event'
                    });
                }
            });
            
            // Convert to array and limit results
            const venueResults = Array.from(suggestions.venues).slice(0, 4).map(venue => ({
                title: venue,
                type: 'venue'
            }));
            
            const locationResults = Array.from(suggestions.locations).slice(0, 3).map(location => ({
                title: location,
                type: 'location'
            }));
            
            const tagResults = Array.from(suggestions.tags).slice(0, 4).map(tag => ({
                title: tag,
                type: 'tag'
            }));
            
            const eventResults = suggestions.events.slice(0, 6);
            
            return [...locationResults, ...venueResults, ...tagResults, ...eventResults];
        }
        
        function showAutocomplete(suggestions, query) {
            selectedIndex = -1;
            autocompleteItems = suggestions;
            
            let html = '';
            
            // Group by type
            const locations = suggestions.filter(s => s.type === 'location');
            const venues = suggestions.filter(s => s.type === 'venue');
            const tags = suggestions.filter(s => s.type === 'tag');
            const events = suggestions.filter(s => s.type === 'event');
            
            let itemIndex = 0;
            
            if (locations.length > 0) {
                html += '<div class="autocomplete-category">Locations</div>';
                locations.forEach(item => {
                    html += `
                        <div class="autocomplete-item" data-index="${itemIndex}" data-type="location" data-value="${item.title}">
                            <div class="autocomplete-item-title">ðŸŒ ${highlightMatch(item.title, query)}</div>
                        </div>
                    `;
                    itemIndex++;
                });
            }
            
            if (venues.length > 0) {
                html += '<div class="autocomplete-category">Venues</div>';
                venues.forEach(item => {
                    html += `
                        <div class="autocomplete-item" data-index="${itemIndex}" data-type="venue" data-value="${item.title}">
                            <div class="autocomplete-item-title">ðŸ“ ${highlightMatch(item.title, query)}</div>
                        </div>
                    `;
                    itemIndex++;
                });
            }
            
            if (tags.length > 0) {
                html += '<div class="autocomplete-category">Tags</div>';
                tags.forEach(item => {
                    html += `
                        <div class="autocomplete-item" data-index="${itemIndex}" data-type="tag" data-value="${item.title}">
                            <div class="autocomplete-item-title">ðŸ·ï¸ ${highlightMatch(item.title, query)}</div>
                        </div>
                    `;
                    itemIndex++;
                });
            }
            
            if (events.length > 0) {
                html += '<div class="autocomplete-category">Events</div>';
                events.forEach(item => {
                    html += `
                        <div class="autocomplete-item" data-index="${itemIndex}" data-type="event" data-value="${item.title}">
                            <div class="autocomplete-item-title">ðŸŽ‰ ${highlightMatch(item.title, query)}</div>
                            <div class="autocomplete-item-venue">${item.venue}</div>
                        </div>
                    `;
                    itemIndex++;
                });
            }
            
            autocompleteDropdown.innerHTML = html;
            autocompleteDropdown.classList.add('show');
            
            // Add click handlers
            autocompleteDropdown.querySelectorAll('.autocomplete-item').forEach(item => {
                item.addEventListener('click', () => {
                    const value = item.getAttribute('data-value');
                    searchBox.value = value;
                    activeFilters.search = value.toLowerCase();
                    hideAutocomplete();
                    applyFilters();
                    scrollToResults();
                });
            });
        }
        
        function hideAutocomplete() {
            autocompleteDropdown.classList.remove('show');
            autocompleteDropdown.innerHTML = '';
            selectedIndex = -1;
        }
        
        function updateSelection(items) {
            items.forEach((item, index) => {
                if (index === selectedIndex) {
                    item.classList.add('selected');
                    item.scrollIntoView({ block: 'nearest' });
                } else {
                    item.classList.remove('selected');
                }
            });
        }
        
        function highlightMatch(text, query) {
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<strong>$1</strong>');
        }
        
        // Scroll to results function
        
        // Clear all button
        document.getElementById('clearAllBtn').addEventListener('click', () => {
            activeFilters = {
                mood: new Set(),
                venue: '',
                location: '',
                when: 'all',
                search: ''
            };
            
            document.querySelectorAll('.mood-button.active').forEach(b => b.classList.remove('active'));
            document.getElementById('locationFilter').value = '';
            document.getElementById('venueFilter').value = '';
            document.getElementById('whenFilter').value = 'all';
            document.getElementById('searchBox').value = '';
            
            applyFilters();
        });
        
        function applyFilters() {
            filteredEvents = allEvents.filter(event => {
                // Mood filter
                if (activeFilters.mood.size > 0) {
                    const eventTags = [...(event.venue_type_tags || []), ...(event.event_type_tags || [])];
                    const hasMatch = Array.from(activeFilters.mood).some(mood => {
                        const moodTags = moodMap[mood];
                        return moodTags.some(tag => eventTags.includes(tag));
                    });
                    if (!hasMatch) return false;
                }
                
                // Venue filter
                if (activeFilters.venue && event.venue !== activeFilters.venue) {
                    return false;
                }
                
                // Location filter
                if (activeFilters.location && event.location !== activeFilters.location) {
                    return false;
                }
                
                // When filter
                if (activeFilters.when !== 'all' && !matchesWhenFilter(event, activeFilters.when)) {
                    return false;
                }
                
                // Exact tag filter (when clicking on a tag)
                if (activeFilters.exactTag) {
                    const eventTags = [...(event.venue_type_tags || []), ...(event.event_type_tags || [])];
                    if (!eventTags.includes(activeFilters.exactTag)) {
                        return false;
                    }
                }
                
                // Search filter
                if (activeFilters.search) {
                    const searchText = `${event.title} ${event.venue} ${event.location} ${event.description}`.toLowerCase();
                    if (!searchText.includes(activeFilters.search)) {
                        return false;
                    }
                }
                
                return true;
            });
            
            renderEvents();
            updateStats();
            updateMoodCounts();
            updateFilterPills();
        }
        
        function matchesWhenFilter(event, when) {
            // For specific date filters (today, tomorrow, etc), exclude events without dates
            // Recurring events without specific dates should only show when viewing "all"
            if (!event.normalized_date) {
                return when === 'all' || when === 'week' || when === 'month';
            }
            
            const eventDate = new Date(event.normalized_date);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            switch(when) {
                case 'today':
                    return eventDate.toDateString() === today.toDateString();
                case 'tomorrow':
                    const tomorrow = new Date(today);
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    return eventDate.toDateString() === tomorrow.toDateString();
                case 'weekend':
                    const thisWeekend = getThisWeekend();
                    return eventDate >= thisWeekend.start && eventDate <= thisWeekend.end;
                case 'week':
                    const weekEnd = new Date(today);
                    weekEnd.setDate(weekEnd.getDate() + 7);
                    return eventDate >= today && eventDate <= weekEnd;
                case 'month':
                    const monthEnd = new Date(today);
                    monthEnd.setMonth(monthEnd.getMonth() + 1);
                    return eventDate >= today && eventDate <= monthEnd;
                default:
                    return true;
            }
        }
        
        function getThisWeekend() {
            const today = new Date();
            const day = today.getDay();
            const saturday = new Date(today);
            saturday.setDate(today.getDate() + (6 - day));
            saturday.setHours(0, 0, 0, 0);
            const sunday = new Date(saturday);
            sunday.setDate(saturday.getDate() + 1);
            sunday.setHours(23, 59, 59, 999);
            return { start: saturday, end: sunday };
        }
        
        function updateMoodCounts() {
            Object.keys(moodMap).forEach(mood => {
                const count = allEvents.filter(event => {
                    const eventTags = [...(event.venue_type_tags || []), ...(event.event_type_tags || [])];
                    return moodMap[mood].some(tag => eventTags.includes(tag));
                }).length;
                const countEl = document.getElementById(`${mood}Count`);
                if (countEl) countEl.textContent = count;
            });
        }
        
        function updateFilterPills() {
            const pillsContainer = document.getElementById('filterPills');
            const activeFiltersDiv = document.getElementById('activeFilters');
            pillsContainer.innerHTML = '';
            
            let hasFilters = false;
            
            // Mood pills
            activeFilters.mood.forEach(mood => {
                hasFilters = true;
                const pill = createPill(mood, 'mood');
                pillsContainer.appendChild(pill);
            });
            
            // Location pill
            if (activeFilters.location) {
                hasFilters = true;
                const pill = createPill(`ðŸ“ ${activeFilters.location}`, 'location');
                pillsContainer.appendChild(pill);
            }
            
            // When pill
            if (activeFilters.when !== 'all') {
                hasFilters = true;
                const whenLabels = {
                    today: 'Today',
                    tomorrow: 'Tomorrow',
                    weekend: 'This Weekend',
                    week: 'This Week',
                    month: 'This Month'
                };
                const pill = createPill(`ðŸ“… ${whenLabels[activeFilters.when]}`, 'when');
                pillsContainer.appendChild(pill);
            }
            
            // Venue pill
            if (activeFilters.venue) {
                hasFilters = true;
                const pill = createPill(`ðŸ¢ ${activeFilters.venue}`, 'venue');
                pillsContainer.appendChild(pill);
            }
            
            activeFiltersDiv.style.display = hasFilters ? 'flex' : 'none';
        }
        
        function createPill(text, type) {
            const pill = document.createElement('div');
            pill.className = 'filter-pill';
            pill.innerHTML = `${text} <span class="remove-pill">âœ•</span>`;
            pill.querySelector('.remove-pill').onclick = () => removePill(text, type);
            return pill;
        }
        
        function removePill(text, type) {
            if (type === 'mood') {
                activeFilters.mood.delete(text);
                document.querySelector(`[data-mood="${text}"]`)?.classList.remove('active');
            } else if (type === 'location') {
                activeFilters.location = '';
                document.getElementById('locationFilter').value = '';
            } else if (type === 'when') {
                activeFilters.when = 'all';
                document.getElementById('whenFilter').value = 'all';
            } else if (type === 'venue') {
                activeFilters.venue = '';
                document.getElementById('venueFilter').value = '';
            }
            applyFilters();
        }
        
        function renderEvents() {
            const grid = document.getElementById('eventsGrid');
            const noEvents = document.getElementById('noEvents');
            
            if (filteredEvents.length === 0) {
                grid.style.display = 'none';
                noEvents.style.display = 'block';
                return;
            }
            
            grid.style.display = 'grid';
            noEvents.style.display = 'none';
            
            // ALWAYS sort events by date chronologically (soonest first)
            let eventsToRender = [...filteredEvents];
            
            eventsToRender.sort((a, b) => {
                // Events with dates come first
                if (!a.normalized_date && b.normalized_date) return 1;
                if (a.normalized_date && !b.normalized_date) return -1;
                if (!a.normalized_date && !b.normalized_date) return 0;
                
                // Compare dates - soonest first
                const dateA = new Date(a.normalized_date);
                const dateB = new Date(b.normalized_date);
                
                if (dateA < dateB) return -1;
                if (dateA > dateB) return 1;
                
                // Same date - sort by venue name as tiebreaker
                return (a.venue || '').localeCompare(b.venue || '');
            });
            
            // Inject ad card every 6 events
            const cardsHTML = [];
            eventsToRender.forEach((event, index) => {
                cardsHTML.push(createEventCard(event));
                
                // Insert ad card after every 6th event (positions 6, 12, 18, etc.)
                if ((index + 1) % 6 === 0) {
                    console.log(`Injecting ad card after event ${index + 1}`);
                    cardsHTML.push(createHappyHourPromoCard());
                }
            });
            
            console.log(`Total cards (events + ads): ${cardsHTML.length}, Events: ${eventsToRender.length}`);
            
            grid.innerHTML = cardsHTML.join('');
            
            // Add event delegation for clickable venues and tags
            attachEventCardHandlers();
        }
        
        function createHappyHourPromoCard() {
            return `
                <div class="promo-card" style="display: flex !important; background: linear-gradient(135deg, #ff9a56 0%, #ff6a88 100%); min-height: 400px; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 20px rgba(0,0,0,0.15); flex-direction: column;">
                    <div style="padding: 40px 30px; text-align: center; color: white; flex: 1; display: flex; flex-direction: column; justify-content: center;">
                        <div style="font-size: 3em;">ðŸ»</div>
                        <h3 style="font-size: 1.8em; font-weight: 700; margin: 20px 0; color: white;">Looking for Happy Hours?</h3>
                        <p style="font-size: 1.3em; font-weight: 600; color: white;">Boulder Happy Hours</p>
                        <p style="font-size: 1em; opacity: 0.9; color: white;">
                            Find the best drink deals and food specials in Boulder County
                        </p>
                        <a href="https://boulderhappyhour.vercel.app" target="_blank" rel="noopener noreferrer" 
                           style="display: inline-block; background: white; color: #ff6a88; padding: 12px 30px; border-radius: 25px; font-weight: 600; margin-top: 20px; text-decoration: none;">
                            Check It Out â†’
                        </a>
                    </div>
                </div>
            `;
        }
        
        function attachEventCardHandlers() {
            const grid = document.getElementById('eventsGrid');
            
            // Handle venue clicks
            grid.addEventListener('click', (e) => {
                const venueElem = e.target.closest('.clickable-venue');
                if (venueElem) {
                    const venue = venueElem.getAttribute('data-venue');
                    filterByVenue(venue);
                }
                
                // Handle tag clicks
                const tagElem = e.target.closest('.clickable-tag');
                if (tagElem) {
                    const tag = tagElem.getAttribute('data-tag');
                    filterByTag(tag);
                }
            });
        }
        
        function filterByVenue(venue) {
            // Clear all filters
            activeFilters = {
                mood: new Set(),
                venue: venue,
                location: '',
                when: 'all',
                search: '',
                exactTag: ''
            };
            
            // Update UI
            document.querySelectorAll('.mood-button.active').forEach(b => b.classList.remove('active'));
            document.getElementById('locationFilter').value = '';
            document.getElementById('venueFilter').value = venue;
            document.getElementById('searchBox').value = '';
            document.getElementById('whenFilter').value = 'all';
            
            applyFilters();
            scrollToResults();
        }
        
        function filterByTag(tag) {
            // Use exact tag matching
            activeFilters = {
                mood: new Set(),
                venue: '',
                location: '',
                when: 'all',
                search: '',
                exactTag: tag  // Exact tag match
            };
            
            // Update UI
            document.querySelectorAll('.mood-button.active').forEach(b => b.classList.remove('active'));
            document.getElementById('locationFilter').value = '';
            document.getElementById('venueFilter').value = '';
            document.getElementById('whenFilter').value = 'all';
            document.getElementById('searchBox').value = tag;
            
            applyFilters();
            scrollToResults();
        }
        
        function createEventCard(event) {
            // Fix image path to include images/ folder
            let imageSrc = event.image;
            if (imageSrc && !imageSrc.startsWith('http') && !imageSrc.startsWith('images/')) {
                imageSrc = `images/${imageSrc}`;
            }
            
            const imageHtml = imageSrc 
                ? `<img src="${imageSrc}" alt="${event.title}" class="event-image">`
                : `<div class="event-image"></div>`;
            
            const recurringHtml = event.recurring 
                ? `<div class="event-recurring">ðŸ”„ ${event.recurring}</div>`
                : '';
            
            const dateHtml = event.date 
                ? `<div class="event-date">ðŸ“… ${event.date}</div>`
                : '';
            
            const timeHtml = event.time 
                ? `<div class="event-time">ðŸ• ${event.time}</div>`
                : '';
            
            const descriptionHtml = event.description 
                ? `<div class="event-description">${truncateText(event.description, 120)}</div>`
                : '';
            
            const additionalInfoHtml = event.additional_info 
                ? `<div class="event-additional-info">â„¹ï¸ ${event.additional_info}</div>`
                : '';
            
            const linkHtml = event.link 
                ? `<a href="${event.link}" target="_blank" class="event-link">More Info â†’</a>`
                : '';
            
            // Combine all tags - make them clickable
            const allTags = [...new Set([...event.venue_type_tags, ...event.event_type_tags])];
            const tagsHtml = allTags.length > 0
                ? `<div class="event-tags">${allTags.map(tag => `<span class="event-tag clickable-tag" data-tag="${tag}">${tag}</span>`).join('')}</div>`
                : '';
            
            return `
                <div class="event-card">
                    ${imageHtml}
                    <div class="event-content">
                        <div class="event-title">${event.title}</div>
                        <div class="event-venue clickable-venue" data-venue="${event.venue}">ðŸ“ ${event.venue}</div>
                        <div class="event-location">${event.location}</div>
                        ${recurringHtml}
                        ${dateHtml}
                        ${timeHtml}
                        ${descriptionHtml}
                        ${additionalInfoHtml}
                        ${tagsHtml}
                        ${linkHtml}
                    </div>
                </div>
            `;
        }
        
        function truncateText(text, maxLength) {
            if (text.length <= maxLength) return text;
            return text.substr(0, maxLength) + '...';
        }
        
        function updateStats() {
            const stats = document.getElementById('stats');
            stats.textContent = `Showing ${filteredEvents.length} of ${allEvents.length} events`;
        }
        
        // Feedback Modal Functionality
        const feedbackBtn = document.getElementById('feedbackBtn');
        const footerCtaBtn = document.getElementById('footerCtaBtn');
        const feedbackModal = document.getElementById('feedbackModal');
        const closeModalBtn = document.getElementById('closeModalBtn');
        
        // Open modal function
        function openFeedbackModal() {
            feedbackModal.style.display = 'flex';
            document.body.classList.add('modal-open');
        }
        
        // Close modal function
        function closeFeedbackModal() {
            feedbackModal.style.display = 'none';
            document.body.classList.remove('modal-open');
        }
        
        // Event listeners
        feedbackBtn.addEventListener('click', openFeedbackModal);
        footerCtaBtn.addEventListener('click', openFeedbackModal);
        closeModalBtn.addEventListener('click', closeFeedbackModal);
        
        // Close on overlay click
        feedbackModal.addEventListener('click', closeFeedbackModal);
        
        // Close on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && feedbackModal.style.display === 'flex') {
                closeFeedbackModal();
            }
        });
        
        // Load events on page load
        loadEvents();
    </script>
</body>
</html>
