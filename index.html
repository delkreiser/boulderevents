<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boulder Events Calendar</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }
        
        h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .filters {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .filter-section {
            margin-bottom: 20px;
        }
        
        .filter-section:last-child {
            margin-bottom: 0;
        }
        
        .filter-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            display: block;
            font-size: 0.95em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .filter-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .tag {
            padding: 8px 16px;
            border-radius: 20px;
            border: 2px solid #e0e0e0;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            user-select: none;
        }
        
        .tag:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }
        
        .tag.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .search-box {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: white;
        }
        
        .search-box:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        /* Search Section */
        .search-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        /* Today Section */
        .today-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }
        
        .today-title {
            font-size: 1.8em;
            color: #333;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .lets-go-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 50px;
            border-radius: 50px;
            font-size: 1.3em;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .lets-go-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.6);
        }
        
        .lets-go-btn:active {
            transform: translateY(-1px);
        }
        
        /* Mood Section */
        .mood-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .mood-title {
            text-align: center;
            font-size: 1.8em;
            color: #333;
            margin-bottom: 25px;
            font-weight: 600;
        }
        
        .mood-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        @media (max-width: 768px) {
            .mood-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .mood-button {
            position: relative;
            aspect-ratio: 1;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        .mood-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.25);
        }
        
        .mood-button.active {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 3px solid white;
        }
        
        .mood-button.active::after {
            content: '‚úì';
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            color: inherit;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
        }
        
        .mood-label {
            font-size: 1.1em;
            font-weight: 600;
            color: white;
            text-align: center;
            z-index: 1;
        }
        
        .mood-icon {
            width: 48px;
            height: 48px;
            color: white;
            opacity: 0.9;
            z-index: 1;
        }
        
        .mood-count {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(255,255,255,0.3);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            backdrop-filter: blur(5px);
        }
        
        /* Mood Button Gradients */
        .music-mood {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .party-mood {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .learning-mood {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .family-mood {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        
        .chill-mood {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }
        
        .arts-mood {
            background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
        }
        
        /* Quick Filters */
        .quick-filters {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        @media (max-width: 768px) {
            .quick-filters {
                flex-direction: column;
            }
        }
        
        .filter-group {
            flex: 1;
            min-width: 180px;
        }
        
        @media (max-width: 768px) {
            .filter-group {
                min-width: 100%;
            }
        }
        
        .filter-group label {
            display: block;
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
        
        .filter-dropdown {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .filter-dropdown:hover {
            border-color: #667eea;
        }
        
        .filter-dropdown:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        /* Active Filters Pills */
        .active-filters {
            background: white;
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .active-filters-label {
            font-weight: 600;
            color: #555;
            font-size: 0.95em;
        }
        
        .filter-pills {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            flex: 1;
        }
        
        .filter-pill {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .filter-pill .remove-pill {
            cursor: pointer;
            font-weight: bold;
            opacity: 0.8;
            transition: opacity 0.2s;
        }
        
        .filter-pill .remove-pill:hover {
            opacity: 1;
        }
        
        .clear-all-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }
        
        .clear-all-btn:hover {
            background: #d32f2f;
            transform: scale(1.05);
        }
        
        /* Advanced Filters */
        .advanced-filters {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .advanced-toggle {
            width: 100%;
            background: transparent;
            border: none;
            padding: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            color: #667eea;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .advanced-toggle:hover {
            color: #764ba2;
        }
        
        .toggle-icon {
            transition: transform 0.3s ease;
        }
        
        .advanced-toggle.open .toggle-icon {
            transform: rotate(180deg);
        }
        
        .advanced-content {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
        }
        
        .filter-section {
            margin-bottom: 20px;
        }
        
        .filter-section:last-child {
            margin-bottom: 0;
        }
        
        .filter-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            display: block;
            font-size: 0.95em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .filter-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .tag {
            padding: 8px 16px;
            border-radius: 20px;
            border: 2px solid #e0e0e0;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            user-select: none;
        }
        
        .tag:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }
        
        .tag.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }
        
        .search-box:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .stats {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.1em;
            backdrop-filter: blur(10px);
        }
        
        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .event-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        
        .event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.25);
        }
        
        .event-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .event-content {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .event-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            line-height: 1.3;
        }
        
        .event-venue {
            color: #667eea;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
        
        .event-location {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 12px;
        }
        
        .event-date, .event-time {
            color: #555;
            margin-bottom: 5px;
            font-size: 0.95em;
        }
        
        .event-recurring {
            background: #ffeaa7;
            color: #d63031;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 0.85em;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 10px;
        }
        
        .event-description {
            color: #666;
            line-height: 1.5;
            margin-bottom: 15px;
            flex-grow: 1;
            font-size: 0.95em;
        }
        
        .event-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }
        
        .event-tag {
            background: #f0f4ff;
            color: #667eea;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 500;
        }
        
        .event-link {
            display: inline-block;
            margin-top: 10px;
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }
        
        .event-link:hover {
            color: #764ba2;
        }
        
        .no-events {
            text-align: center;
            color: white;
            font-size: 1.3em;
            padding: 60px 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }
            
            .events-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéâ Boulder Events Calendar</h1>
            <p class="subtitle">Discover what's happening in Boulder County</p>
        </header>
        
        <!-- Search Bar -->
        <div class="search-section">
            <input type="text" class="search-box" id="searchBox" placeholder="üîç Search events by name, venue, or keyword...">
        </div>
        
        <!-- Today Section -->
        <div class="today-section">
            <h2 class="today-title">What's happening today?</h2>
            <button class="lets-go-btn" id="letsGoBtn">Let's go out!</button>
        </div>
        
        <!-- Mood Filter Buttons -->
        <div class="mood-section">
            <h2 class="mood-title">‚ú® What's Your Mood?</h2>
            <div class="mood-grid">
                <button class="mood-button music-mood" data-mood="music">
                    <div class="mood-label">Live Music</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18V5l12-2v13M9 18c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3zm12-3c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3z"/>
                    </svg>
                    <div class="mood-count" id="musicCount"></div>
                </button>
                
                <button class="mood-button party-mood" data-mood="party">
                    <div class="mood-label">Party Vibes</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <g transform="matrix(1.12318,0,0,1.17968,-1.37302,-2.06212)">
                            <g transform="matrix(1,0,0,0.864695,0,2.65685)">
                                <path d="M12.141,20.299C12.141,20.464 12.007,20.599 11.841,20.599C11.676,20.599 11.541,20.464 11.541,20.299L11.541,18.814C11.541,18.648 11.676,18.514 11.841,18.514C12.007,18.514 12.141,18.648 12.141,18.814L12.141,20.299Z"/>
                            </g>
                            <g transform="matrix(6.12323e-17,-1,0.864695,5.29473e-17,-11.2374,25.2236)">
                                <path d="M12.141,20.299C12.141,20.464 12.007,20.599 11.841,20.599C11.676,20.599 11.541,20.464 11.541,20.299L11.541,18.814C11.541,18.648 11.676,18.514 11.841,18.514C12.007,18.514 12.141,18.648 12.141,18.814L12.141,20.299Z"/>
                            </g>
                            <g transform="matrix(6.12323e-17,-1,0.864695,5.29473e-17,1.21351,25.2236)">
                                <path d="M12.141,20.299C12.141,20.464 12.007,20.599 11.841,20.599C11.676,20.599 11.541,20.464 11.541,20.299L11.541,18.814C11.541,18.648 11.676,18.514 11.841,18.514C12.007,18.514 12.141,18.648 12.141,18.814L12.141,20.299Z"/>
                            </g>
                            <g transform="matrix(0.707107,0.707107,-0.611432,0.611432,11.0423,-2.55793)">
                                <path d="M12.141,20.299C12.141,20.464 12.007,20.599 11.841,20.599C11.676,20.599 11.541,20.464 11.541,20.299L11.541,18.814C11.541,18.648 11.676,18.514 11.841,18.514C12.007,18.514 12.141,18.648 12.141,18.814L12.141,20.299Z"/>
                            </g>
                            <g transform="matrix(0.707107,-0.707107,0.611432,0.611432,-4.07487,14.1884)">
                                <path d="M12.141,20.299C12.141,20.464 12.007,20.599 11.841,20.599C11.676,20.599 11.541,20.464 11.541,20.299L11.541,18.814C11.541,18.648 11.676,18.514 11.841,18.514C12.007,18.514 12.141,18.648 12.141,18.814L12.141,20.299Z"/>
                            </g>
                            <g transform="matrix(0.707107,-0.707107,-0.611432,-0.611432,11.0423,29.3046)">
                                <path d="M12.141,20.299C12.141,20.464 12.007,20.599 11.841,20.599C11.676,20.599 11.541,20.464 11.541,20.299L11.541,18.814C11.541,18.648 11.676,18.514 11.841,18.514C12.007,18.514 12.141,18.648 12.141,18.814L12.141,20.299Z"/>
                            </g>
                            <g transform="matrix(0.707107,0.707107,0.611432,-0.611432,-4.07487,12.5582)">
                                <path d="M12.141,20.299C12.141,20.464 12.007,20.599 11.841,20.599C11.676,20.599 11.541,20.464 11.541,20.299L11.541,18.814C11.541,18.648 11.676,18.514 11.841,18.514C12.007,18.514 12.141,18.648 12.141,18.814L12.141,20.299Z"/>
                            </g>
                            <g transform="matrix(0.992963,0,0,0.992963,0.0141704,0.0250742)">
                                <path d="M11.674,5.371L3.697,5.371C3.53,5.371 3.395,5.235 3.395,5.069C3.395,4.902 3.53,4.767 3.697,4.767L20.256,4.767C20.423,4.767 20.558,4.902 20.558,5.069C20.558,5.235 20.423,5.371 20.256,5.371L12.279,5.371L12.279,7.194L12.958,7.194C13.125,7.194 13.26,7.33 13.26,7.496L13.26,8.735C15.313,9.323 16.817,11.215 16.817,13.456C16.817,14.301 16.603,15.097 16.226,15.792C16.213,15.84 16.188,15.883 16.155,15.918C15.339,17.323 13.846,18.286 12.124,18.362C12.096,18.366 12.067,18.367 12.038,18.365L11.906,18.366C9.196,18.366 6.996,16.166 6.996,13.456C6.996,11.183 8.543,9.269 10.64,8.71L10.64,7.496C10.64,7.329 10.776,7.194 10.942,7.194L11.674,7.194L11.674,5.371ZM13.808,17.32C14.427,17.015 14.963,16.564 15.37,16.014L14.723,16.014C14.472,16.561 14.144,16.989 13.808,17.32ZM7.611,13.758C7.652,14.349 7.812,14.908 8.068,15.41L9.026,15.41C8.882,14.934 8.794,14.387 8.79,13.758L7.611,13.758ZM8.443,16.014C8.917,16.655 9.565,17.16 10.317,17.459C9.93,17.111 9.542,16.64 9.254,16.014L8.443,16.014ZM9.395,13.758C9.4,14.401 9.505,14.948 9.67,15.41L10.677,15.41C10.607,14.929 10.558,14.38 10.546,13.758L9.395,13.758ZM9.943,16.014C10.302,16.662 10.78,17.09 11.186,17.363C11.047,17.023 10.901,16.577 10.784,16.014L9.943,16.014ZM9.805,11.502C9.614,11.967 9.472,12.514 9.418,13.154L10.546,13.154C10.558,12.531 10.607,11.983 10.677,11.502L9.805,11.502ZM11.289,11.502C11.215,11.975 11.163,12.523 11.151,13.154L12.827,13.154C12.814,12.523 12.762,11.975 12.688,11.502L11.289,11.502ZM12.827,13.758L11.151,13.758C11.163,14.389 11.215,14.937 11.289,15.41L12.688,15.41C12.762,14.937 12.814,14.389 12.827,13.758ZM12.575,16.014L11.403,16.014C11.588,16.846 11.834,17.368 11.989,17.64C12.144,17.368 12.389,16.846 12.575,16.014ZM15.744,15.41C16.001,14.908 16.161,14.349 16.202,13.758L15.187,13.758C15.183,14.387 15.095,14.934 14.951,15.41L15.744,15.41ZM15.37,10.898C14.896,10.258 14.25,9.754 13.499,9.454C13.871,9.806 14.257,10.278 14.566,10.898L15.37,10.898ZM14.824,11.502C14.994,11.98 15.117,12.528 15.165,13.154L16.202,13.154C16.161,12.563 16.001,12.004 15.744,11.502L14.824,11.502ZM12.791,17.363C13.197,17.09 13.675,16.662 14.034,16.014L13.193,16.014C13.076,16.577 12.93,17.023 12.791,17.363ZM13.3,15.41L14.307,15.41C14.473,14.948 14.578,14.401 14.583,13.758L13.431,13.758C13.419,14.38 13.37,14.929 13.3,15.41ZM13.431,13.154L14.559,13.154C14.505,12.514 14.363,11.967 14.172,11.502L13.3,11.502C13.37,11.983 13.419,12.531 13.431,13.154ZM13.873,10.898C13.556,10.358 13.18,9.965 12.846,9.688C12.968,10.008 13.091,10.408 13.193,10.898L13.873,10.898ZM10.784,10.898C10.886,10.408 11.009,10.008 11.131,9.688C10.797,9.965 10.421,10.358 10.104,10.898L10.784,10.898ZM12.124,8.55C12.304,8.558 12.482,8.576 12.656,8.602L12.656,7.798L11.976,7.798L11.245,7.798L11.245,8.59C11.461,8.56 11.682,8.545 11.906,8.545L12.038,8.547C12.067,8.545 12.096,8.546 12.124,8.55ZM11.989,9.272C11.834,9.544 11.588,10.066 11.403,10.898L12.575,10.898C12.389,10.066 12.144,9.544 11.989,9.272ZM8.068,11.502C7.812,12.004 7.652,12.563 7.611,13.154L8.812,13.154C8.86,12.528 8.983,11.98 9.153,11.502L8.068,11.502ZM9.411,10.898C9.75,10.219 10.181,9.717 10.584,9.357C9.718,9.636 8.972,10.182 8.443,10.898L9.411,10.898Z"/>
                            </g>
                            <path d="M3.685,4.022C3.506,4.022 3.36,3.877 3.36,3.697C3.36,3.518 3.506,3.372 3.685,3.372L20.127,3.372C20.307,3.372 20.452,3.518 20.452,3.697C20.452,3.877 20.307,4.022 20.127,4.022L3.685,4.022Z"/>
                        </g>
                    </svg>
                    <div class="mood-count" id="partyCount"></div>
                </button>
                
                <button class="mood-button learning-mood" data-mood="learning">
                    <div class="mood-label">Learn Something</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                    </svg>
                    <div class="mood-count" id="learningCount"></div>
                </button>
                
                <button class="mood-button family-mood" data-mood="family">
                    <div class="mood-label">Family Fun</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <g transform="matrix(1,0,0,1,0,-0.546666)">
                            <g transform="matrix(1.363,0,0,1.363,-1.77493,-4.58072)">
                                <path d="M17.164,9.697C18.226,10.525 18.91,11.816 18.91,13.266C18.91,15.762 16.884,17.788 14.389,17.788C12.401,17.788 10.712,16.502 10.106,14.718C9.501,16.502 7.811,17.788 5.824,17.788C3.328,17.788 1.302,15.762 1.302,13.266C1.302,12.735 1.394,12.224 1.563,11.75L1.564,11.749C2.188,9.999 3.86,8.745 5.824,8.745C6.351,8.745 6.857,8.835 7.328,9.002C7.315,8.802 7.316,8.58 7.356,8.408C7.475,7.9 7.854,7.581 8.333,7.581C8.77,7.58 9.147,7.906 9.28,8.178C9.499,8.626 9.243,8.961 9.191,9.024C9.191,9.024 9.067,9.116 8.97,9.113C8.88,9.11 8.674,9.006 8.674,8.846C8.674,8.757 8.746,8.655 8.746,8.655C8.746,8.655 8.818,8.55 8.76,8.433C8.7,8.309 8.532,8.159 8.334,8.159C8.123,8.159 7.971,8.317 7.919,8.54C7.867,8.76 7.904,9.085 7.933,9.267L7.965,9.284C8.964,9.823 9.737,10.726 10.106,11.815C10.389,10.982 10.908,10.257 11.583,9.722C11.451,9.531 11.275,9.214 11.215,8.819C11.196,8.696 11.175,8.439 11.209,8.196C11.237,7.999 11.305,7.812 11.416,7.682C11.656,7.402 11.973,7.304 12.33,7.359C13.094,7.478 13.989,8.217 14.365,8.555C14.741,8.217 15.636,7.478 16.4,7.359C16.757,7.304 17.074,7.402 17.314,7.682C17.425,7.812 17.492,7.999 17.521,8.196C17.555,8.439 17.534,8.696 17.515,8.819C17.458,9.197 17.293,9.504 17.164,9.697ZM12.057,9.393C12.567,9.085 13.143,8.875 13.758,8.789C13.615,8.668 13.439,8.529 13.247,8.397C12.933,8.183 12.574,7.982 12.241,7.93C12.092,7.907 11.956,7.94 11.855,8.058C11.809,8.112 11.793,8.195 11.782,8.278C11.756,8.455 11.773,8.642 11.787,8.732C11.831,9.024 11.963,9.258 12.057,9.393ZM14.978,8.783C15.596,8.864 16.174,9.069 16.687,9.373C16.78,9.235 16.901,9.01 16.943,8.732C16.957,8.642 16.974,8.455 16.948,8.278C16.937,8.195 16.921,8.112 16.874,8.058C16.774,7.94 16.638,7.907 16.488,7.93C16.156,7.982 15.797,8.183 15.483,8.397C15.294,8.527 15.121,8.663 14.978,8.783ZM14.391,9.724C14.119,10.232 13.615,10.994 12.767,11.728C12.235,12.189 10.875,13.126 10.449,13.417C10.528,15.524 12.263,17.21 14.389,17.21C16.544,17.21 18.297,15.478 18.332,13.331C17.938,13.092 16.812,12.39 16.072,11.741C15.148,10.931 14.653,10.221 14.391,9.724ZM18.279,12.619C17.995,10.9 16.596,9.554 14.851,9.35C15.061,9.782 15.511,10.481 16.453,11.306C17.006,11.791 17.782,12.305 18.279,12.619ZM9.729,12.723C9.575,11.607 8.954,10.64 8.069,10.026C8.067,10.432 8.15,11.07 8.59,11.677C8.904,12.111 9.378,12.483 9.729,12.723ZM7.361,9.634C6.888,9.434 6.369,9.323 5.824,9.323C4.264,9.323 2.915,10.23 2.276,11.545C2.856,11.512 3.938,11.398 5.026,11.006C6.328,10.538 7.037,9.96 7.361,9.634ZM2.046,12.133C1.938,12.492 1.88,12.872 1.88,13.266C1.88,15.443 3.647,17.21 5.824,17.21C7.945,17.21 9.678,15.53 9.763,13.43C9.424,13.224 8.605,12.684 8.121,12.016C7.682,11.408 7.537,10.774 7.502,10.292C7.065,10.664 6.341,11.148 5.221,11.55C3.883,12.032 2.553,12.118 2.046,12.133ZM13.935,9.349C12.162,9.553 10.746,10.934 10.488,12.689C11.06,12.294 11.978,11.647 12.389,11.291C13.234,10.559 13.706,9.8 13.935,9.349Z"/>
                            </g>
                            <g transform="matrix(1.12563,0,0,1.12563,-1.19366,-1.59239)">
                                <path d="M8.586,16.005C8.242,16.375 7.519,16.965 6.398,16.965C4.782,16.965 3.909,15.728 3.909,15.728C3.797,15.571 3.834,15.352 3.992,15.24C4.149,15.128 4.368,15.165 4.48,15.323C4.48,15.323 5.156,16.265 6.398,16.265C7.459,16.265 8.053,15.573 8.196,15.384C8.089,15.028 8.194,14.751 8.195,14.745C8.22,14.581 8.343,14.447 8.563,14.464C8.87,14.488 8.887,14.851 8.887,14.851C8.887,14.851 8.843,15.153 8.929,15.32C9.034,15.519 9.247,15.641 9.288,15.665C9.288,15.665 9.593,15.78 9.5,16.07C9.404,16.369 9.126,16.325 9.126,16.325C9.059,16.325 8.94,16.289 8.887,16.257C8.844,16.232 8.721,16.145 8.586,16.005Z"/>
                            </g>
                            <g transform="matrix(1.12563,0,0,1.12563,10.6869,-1.59239)">
                                <path d="M3.909,15.728C3.797,15.571 3.834,15.352 3.992,15.24C4.149,15.128 4.368,15.165 4.48,15.323C4.48,15.323 5.156,16.265 6.398,16.265C7.627,16.265 8.229,15.337 8.229,15.337C8.333,15.174 8.55,15.126 8.713,15.23C8.876,15.334 8.923,15.551 8.819,15.714C8.819,15.714 8.029,16.965 6.398,16.965C4.782,16.965 3.909,15.728 3.909,15.728Z"/>
                            </g>
                            <g transform="matrix(2.22363,0,0,2.22363,-18.6797,-16.0402)">
                                <circle cx="15.696" cy="13.021" r="0.264"/>
                            </g>
                            <g transform="matrix(2.22363,0,0,2.22363,-30.6315,-16.0402)">
                                <circle cx="15.696" cy="13.021" r="0.264"/>
                            </g>
                            <g transform="matrix(2.22363,0,0,2.22363,-27.384,-16.0402)">
                                <path d="M15.431,13.021C15.431,12.875 15.55,12.757 15.696,12.757C15.841,12.757 15.96,12.875 15.96,13.021L15.431,13.021Z"/>
                            </g>
                            <g transform="matrix(2.22363,0,0,2.22363,-15.4332,-16.0402)">
                                <circle cx="15.696" cy="13.021" r="0.264"/>
                            </g>
                        </g>
                    </svg>
                    <div class="mood-count" id="familyCount"></div>
                </button>
                
                <button class="mood-button chill-mood" data-mood="chill">
                    <div class="mood-label">Chill & Drinks</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <g transform="matrix(0.0872521,0,0,0.0872521,-3.4392,-3.5396)">
                            <path d="M157.9,301.136L158.401,172.62L91.871,99.632L48.711,52.283C46.843,50.234 46.361,47.276 47.481,44.74C48.601,42.204 51.112,40.568 53.884,40.568L300.015,40.568C302.777,40.568 305.282,42.193 306.407,44.716C307.533,47.239 307.069,50.188 305.223,52.244L197.174,172.601L197.174,301.136L227.357,301.136C231.357,301.136 234.605,304.384 234.605,308.384C234.605,312.385 231.357,315.632 227.357,315.632L128.466,315.632C124.465,315.632 121.218,312.385 121.218,308.384C121.218,304.384 124.465,301.136 128.466,301.136L157.9,301.136ZM107.694,96.209L170.585,165.204C171.767,166.5 172.419,168.193 172.412,169.947L171.901,300.802L183.174,300.802L183.174,169.92C183.174,168.193 183.812,166.528 184.965,165.243L236.737,107.575C235.129,107.703 233.506,107.769 231.894,107.753C219.025,107.62 211.921,105.803 199.454,101.562C188.256,97.753 162.669,88.226 141.26,88.313C125.145,88.378 113.943,92.803 107.694,96.209ZM252.568,89.94L284.323,54.568L69.737,54.568L98.035,85.612C105.351,81.062 119.716,74.4 141.203,74.313C164.269,74.22 191.898,84.204 203.963,88.308C214.759,91.98 220.894,93.639 232.038,93.753C240.427,93.84 249.159,91.127 252.568,89.94Z"/>
                        </g>
                    </svg>
                    <div class="mood-count" id="chillCount"></div>
                </button>
                
                <button class="mood-button arts-mood" data-mood="arts">
                    <div class="mood-label">Arts & Culture</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <g transform="matrix(1.13048,0,0,1.13048,-1.66788,-0.637494)">
                            <path d="M17.353,16.781C17.061,17.055 16.609,17.444 16.071,17.783C15.13,18.374 13.149,19.447 11.564,19.679C10.707,19.804 8.739,20.227 6.695,19.282C4.628,18.326 3.544,16.839 3.322,13.546C3.103,10.293 5.22,7.4 6.383,6.389C7.543,5.38 9.437,4.014 11.74,3.861C13.211,3.764 14.202,3.906 15.228,4.848C16.208,5.747 16.446,7.092 16.2,7.983C16.044,8.55 15.641,9.357 14.978,9.887C14.472,10.292 14.32,10.768 14.347,11.119C14.379,11.532 14.619,11.885 15.082,11.976C15.264,12.012 15.465,11.921 15.659,11.81C16.036,11.594 16.381,11.265 16.549,11.129C16.7,11.006 16.921,10.928 17.136,10.888C17.233,10.87 17.328,10.858 17.411,10.852C17.598,9.723 17.852,8.879 17.974,8.513C17.791,8.41 17.606,8.257 17.427,8.03C17.091,7.601 16.851,7.123 16.822,5.672C16.77,3.162 18.482,2.566 18.713,2.497C18.682,2.508 18.946,2.452 19.008,2.49C19.164,2.585 19.114,2.806 19.114,2.806L19.114,2.815C19.108,2.889 19.084,3.28 19.154,3.708C19.201,4 19.289,4.312 19.473,4.537C19.59,4.68 19.757,4.8 19.93,4.93C20.14,5.088 20.36,5.257 20.544,5.47C20.714,5.667 20.827,5.961 20.862,6.294C20.911,6.753 20.815,7.284 20.575,7.688C20.369,8.036 20.096,8.297 19.8,8.469C20.082,9.198 20.758,11.201 20.727,13.573C20.704,15.294 20.589,16.283 20.476,16.965C20.339,17.784 19.632,18.426 18.861,18.424C18.531,18.422 18.232,18.267 17.991,18.034C17.667,17.72 17.452,17.269 17.393,16.975C17.381,16.914 17.367,16.851 17.353,16.781ZM17.321,11.465C17.297,11.469 17.272,11.473 17.247,11.478C17.131,11.499 17.008,11.53 16.926,11.595C16.744,11.743 16.367,12.097 15.957,12.331C15.627,12.52 15.275,12.625 14.967,12.565C14.206,12.416 13.801,11.843 13.749,11.165C13.711,10.673 13.893,9.987 14.603,9.419C15.157,8.975 15.491,8.298 15.622,7.824C15.821,7.103 15.615,6.018 14.822,5.29C13.93,4.471 13.059,4.375 11.78,4.46C9.626,4.602 7.862,5.898 6.777,6.842C5.694,7.784 3.717,10.476 3.921,13.506C4.122,16.497 5.07,17.869 6.947,18.737C8.848,19.616 10.68,19.201 11.477,19.085C12.982,18.865 14.859,17.836 15.751,17.275C16.554,16.77 17.148,16.147 17.247,16.041C17.201,15.523 17.17,14.704 17.19,13.287C17.199,12.64 17.249,12.026 17.321,11.465ZM17.964,11.196C17.87,11.825 17.8,12.536 17.79,13.296C17.752,15.997 17.899,16.446 17.981,16.857C18.023,17.064 18.179,17.381 18.408,17.602C18.536,17.726 18.688,17.823 18.864,17.824C19.359,17.825 19.796,17.393 19.884,16.867C19.995,16.203 20.105,15.24 20.127,13.565C20.157,11.287 19.504,9.366 19.241,8.686C19.149,8.704 19.058,8.714 18.969,8.716C18.843,8.719 18.699,8.72 18.544,8.7C18.423,9.064 18.149,9.969 17.967,11.178C17.966,11.184 17.965,11.19 17.964,11.196ZM19.413,7.999C19.665,7.893 19.889,7.668 20.059,7.382C20.236,7.085 20.301,6.694 20.265,6.357C20.244,6.159 20.191,5.979 20.09,5.862C19.901,5.643 19.664,5.482 19.453,5.322C19.283,5.192 19.127,5.062 19.008,4.917C18.76,4.614 18.626,4.198 18.562,3.805C18.53,3.609 18.515,3.419 18.509,3.257C18.063,3.542 17.392,4.213 17.421,5.66C17.446,6.886 17.615,7.297 17.899,7.659C18.266,8.127 18.68,8.123 18.955,8.117C19.036,8.115 19.118,8.099 19.202,8.079C19.324,8.051 19.354,8.023 19.413,7.999Z"/>
                        </g>
                        <g transform="matrix(1.0341,0,0,1.0754,-0.787957,-0.263948)">
                            <path d="M10.699,6.467C11.751,6.467 12.595,7.248 12.595,8.197C12.595,9.145 11.751,9.926 10.699,9.926C9.646,9.926 8.802,9.145 8.802,8.197C8.802,7.248 9.646,6.467 10.699,6.467ZM10.699,7.098C10.02,7.098 9.458,7.584 9.458,8.197C9.458,8.809 10.02,9.295 10.699,9.295C11.378,9.295 11.94,8.809 11.94,8.197C11.94,7.584 11.378,7.098 10.699,7.098Z"/>
                        </g>
                        <g transform="matrix(1.0341,0,0,1.0754,-4.96061,3.34128)">
                            <path d="M10.699,6.467C11.751,6.467 12.595,7.248 12.595,8.197C12.595,9.145 11.751,9.926 10.699,9.926C9.646,9.926 8.802,9.145 8.802,8.197C8.802,7.248 9.646,6.467 10.699,6.467ZM10.699,7.098C10.02,7.098 9.458,7.584 9.458,8.197C9.458,8.809 10.02,9.295 10.699,9.295C11.378,9.295 11.94,8.809 11.94,8.197C11.94,7.584 11.378,7.098 10.699,7.098Z"/>
                        </g>
                        <g transform="matrix(1.0341,0,0,1.0754,-4.49495,8.22529)">
                            <path d="M10.699,6.467C11.751,6.467 12.595,7.248 12.595,8.197C12.595,9.145 11.751,9.926 10.699,9.926C9.646,9.926 8.802,9.145 8.802,8.197C8.802,7.248 9.646,6.467 10.699,6.467ZM10.699,7.098C10.02,7.098 9.458,7.584 9.458,8.197C9.458,8.809 10.02,9.295 10.699,9.295C11.378,9.295 11.94,8.809 11.94,8.197C11.94,7.584 11.378,7.098 10.699,7.098Z"/>
                        </g>
                        <g transform="matrix(1.0341,0,0,1.0754,-0.263292,9.51543)">
                            <path d="M10.699,6.467C11.751,6.467 12.595,7.248 12.595,8.197C12.595,9.145 11.751,9.926 10.699,9.926C9.646,9.926 8.802,9.145 8.802,8.197C8.802,7.248 9.646,6.467 10.699,6.467ZM10.699,7.098C10.02,7.098 9.458,7.584 9.458,8.197C9.458,8.809 10.02,9.295 10.699,9.295C11.378,9.295 11.94,8.809 11.94,8.197C11.94,7.584 11.378,7.098 10.699,7.098Z"/>
                        </g>
                    </svg>
                    <div class="mood-count" id="artsCount"></div>
                </button>
            </div>
        </div>
        
        <!-- Quick Filters -->
        <div class="quick-filters">
            <div class="filter-group">
                <label for="locationFilter">üìç Location</label>
                <select id="locationFilter" class="filter-dropdown">
                    <option value="">All Locations</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label for="whenFilter">üìÖ When</label>
                <select id="whenFilter" class="filter-dropdown">
                    <option value="all">All Events</option>
                    <option value="today">Today</option>
                    <option value="tomorrow">Tomorrow</option>
                    <option value="weekend">This Weekend</option>
                    <option value="week">This Week</option>
                    <option value="month">This Month</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label for="venueFilter">üè¢ Venues</label>
                <select id="venueFilter" class="filter-dropdown">
                    <option value="">All Venues</option>
                </select>
            </div>
        </div>
        
        <!-- Active Filters Pills -->
        <div class="active-filters" id="activeFilters" style="display: none;">
            <div class="active-filters-label">Active Filters:</div>
            <div class="filter-pills" id="filterPills"></div>
            <button class="clear-all-btn" id="clearAllBtn">Clear All</button>
        </div>
        
        <div class="stats" id="stats"></div>
        
        <div class="events-grid" id="eventsGrid"></div>
        
        <div class="no-events" id="noEvents" style="display: none;">
            No events found matching your filters. Try adjusting your search!
        </div>
    </div>
    
    <script>
        let allEvents = [];
        let filteredEvents = [];
        let activeFilters = {
            mood: new Set(),
            venue: '',
            location: '',
            when: 'all',
            search: ''
        };
        
        // Mood to tag mapping
        const moodMap = {
            music: ['Music', 'Live Music', 'Dance/Music'],
            party: ['Dance/Music', 'Nightlife', 'Performance', '21+'],
            learning: ['Educational', 'Books & Literary', 'Books', 'Literary'],
            family: ['All Ages', 'Family Friendly', 'Family Fun'],
            chill: ['Bar', 'Pub', 'Food & Drink'],
            arts: ['Arts', 'Performance', 'Community', 'Books & Literary']
        };
        
        // Load events
        async function loadEvents() {
            try {
                const response = await fetch('all_boulder_events.json');
                const data = await response.json();
                allEvents = data.events;
                
                initializeFilters(data.tags);
                filteredEvents = allEvents;
                renderEvents();
                updateStats();
                updateMoodCounts();
            } catch (error) {
                console.error('Error loading events:', error);
                document.getElementById('noEvents').style.display = 'block';
                document.getElementById('noEvents').textContent = 'Error loading events.';
            }
        }
        
        function initializeFilters(tags) {
            // Venue dropdown
            const venueFilter = document.getElementById('venueFilter');
            tags.venues.forEach(venue => {
                const option = document.createElement('option');
                option.value = venue;
                option.textContent = venue;
                venueFilter.appendChild(option);
            });
            
            // Location dropdown
            const locationFilter = document.getElementById('locationFilter');
            tags.locations.forEach(location => {
                const option = document.createElement('option');
                option.value = location;
                option.textContent = location;
                locationFilter.appendChild(option);
            });
        }
        
        // Mood button clicks
        document.querySelectorAll('.mood-button').forEach(button => {
            button.addEventListener('click', () => {
                const mood = button.dataset.mood;
                if (activeFilters.mood.has(mood)) {
                    activeFilters.mood.delete(mood);
                    button.classList.remove('active');
                } else {
                    activeFilters.mood.add(mood);
                    button.classList.add('active');
                }
                applyFilters();
                scrollToResults();
            });
        });
        
        // "Let's go out!" button
        document.getElementById('letsGoBtn').addEventListener('click', () => {
            // Clear all filters first
            activeFilters = {
                mood: new Set(),
                venue: '',
                location: '',
                when: 'today',
                search: ''
            };
            
            // Reset UI
            document.querySelectorAll('.mood-button.active').forEach(b => b.classList.remove('active'));
            document.getElementById('locationFilter').value = '';
            document.getElementById('venueFilter').value = '';
            document.getElementById('whenFilter').value = 'today';
            document.getElementById('searchBox').value = '';
            
            applyFilters();
            scrollToResults();
        });
        
        // Venue dropdown
        document.getElementById('venueFilter').addEventListener('change', (e) => {
            activeFilters.venue = e.target.value;
            applyFilters();
        });
        
        // Location dropdown
        document.getElementById('locationFilter').addEventListener('change', (e) => {
            activeFilters.location = e.target.value;
            applyFilters();
        });
        
        // When filter
        document.getElementById('whenFilter').addEventListener('change', (e) => {
            activeFilters.when = e.target.value;
            applyFilters();
        });
        
        // Search box
        document.getElementById('searchBox').addEventListener('input', (e) => {
            activeFilters.search = e.target.value.toLowerCase();
            applyFilters();
        });
        
        // Scroll to results function
        function scrollToResults() {
            const stats = document.getElementById('stats');
            if (stats) {
                stats.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
        
        // Clear all button
        document.getElementById('clearAllBtn').addEventListener('click', () => {
            activeFilters = {
                mood: new Set(),
                venue: '',
                location: '',
                when: 'all',
                search: ''
            };
            
            document.querySelectorAll('.mood-button.active').forEach(b => b.classList.remove('active'));
            document.getElementById('locationFilter').value = '';
            document.getElementById('venueFilter').value = '';
            document.getElementById('whenFilter').value = 'all';
            document.getElementById('searchBox').value = '';
            
            applyFilters();
        });
        
        function applyFilters() {
            filteredEvents = allEvents.filter(event => {
                // Mood filter
                if (activeFilters.mood.size > 0) {
                    const eventTags = [...(event.venue_type_tags || []), ...(event.event_type_tags || [])];
                    const hasMatch = Array.from(activeFilters.mood).some(mood => {
                        const moodTags = moodMap[mood];
                        return moodTags.some(tag => eventTags.includes(tag));
                    });
                    if (!hasMatch) return false;
                }
                
                // Venue filter
                if (activeFilters.venue && event.venue !== activeFilters.venue) {
                    return false;
                }
                
                // Location filter
                if (activeFilters.location && event.location !== activeFilters.location) {
                    return false;
                }
                
                // When filter
                if (activeFilters.when !== 'all' && !matchesWhenFilter(event, activeFilters.when)) {
                    return false;
                }
                
                // Search filter
                if (activeFilters.search) {
                    const searchText = `${event.title} ${event.venue} ${event.description}`.toLowerCase();
                    if (!searchText.includes(activeFilters.search)) {
                        return false;
                    }
                }
                
                return true;
            });
            
            renderEvents();
            updateStats();
            updateMoodCounts();
            updateFilterPills();
        }
        
        function matchesWhenFilter(event, when) {
            if (!event.normalized_date) return true;
            
            const eventDate = new Date(event.normalized_date);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            switch(when) {
                case 'today':
                    return eventDate.toDateString() === today.toDateString();
                case 'tomorrow':
                    const tomorrow = new Date(today);
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    return eventDate.toDateString() === tomorrow.toDateString();
                case 'weekend':
                    const thisWeekend = getThisWeekend();
                    return eventDate >= thisWeekend.start && eventDate <= thisWeekend.end;
                case 'week':
                    const weekEnd = new Date(today);
                    weekEnd.setDate(weekEnd.getDate() + 7);
                    return eventDate >= today && eventDate <= weekEnd;
                case 'month':
                    const monthEnd = new Date(today);
                    monthEnd.setMonth(monthEnd.getMonth() + 1);
                    return eventDate >= today && eventDate <= monthEnd;
                default:
                    return true;
            }
        }
        
        function getThisWeekend() {
            const today = new Date();
            const day = today.getDay();
            const saturday = new Date(today);
            saturday.setDate(today.getDate() + (6 - day));
            saturday.setHours(0, 0, 0, 0);
            const sunday = new Date(saturday);
            sunday.setDate(saturday.getDate() + 1);
            sunday.setHours(23, 59, 59, 999);
            return { start: saturday, end: sunday };
        }
        
        function updateMoodCounts() {
            Object.keys(moodMap).forEach(mood => {
                const count = allEvents.filter(event => {
                    const eventTags = [...(event.venue_type_tags || []), ...(event.event_type_tags || [])];
                    return moodMap[mood].some(tag => eventTags.includes(tag));
                }).length;
                const countEl = document.getElementById(`${mood}Count`);
                if (countEl) countEl.textContent = count;
            });
        }
        
        function updateFilterPills() {
            const pillsContainer = document.getElementById('filterPills');
            const activeFiltersDiv = document.getElementById('activeFilters');
            pillsContainer.innerHTML = '';
            
            let hasFilters = false;
            
            // Mood pills
            activeFilters.mood.forEach(mood => {
                hasFilters = true;
                const pill = createPill(mood, 'mood');
                pillsContainer.appendChild(pill);
            });
            
            // Location pill
            if (activeFilters.location) {
                hasFilters = true;
                const pill = createPill(`üìç ${activeFilters.location}`, 'location');
                pillsContainer.appendChild(pill);
            }
            
            // When pill
            if (activeFilters.when !== 'all') {
                hasFilters = true;
                const whenLabels = {
                    today: 'Today',
                    tomorrow: 'Tomorrow',
                    weekend: 'This Weekend',
                    week: 'This Week',
                    month: 'This Month'
                };
                const pill = createPill(`üìÖ ${whenLabels[activeFilters.when]}`, 'when');
                pillsContainer.appendChild(pill);
            }
            
            // Venue pill
            if (activeFilters.venue) {
                hasFilters = true;
                const pill = createPill(`üè¢ ${activeFilters.venue}`, 'venue');
                pillsContainer.appendChild(pill);
            }
            
            activeFiltersDiv.style.display = hasFilters ? 'flex' : 'none';
        }
        
        function createPill(text, type) {
            const pill = document.createElement('div');
            pill.className = 'filter-pill';
            pill.innerHTML = `${text} <span class="remove-pill">‚úï</span>`;
            pill.querySelector('.remove-pill').onclick = () => removePill(text, type);
            return pill;
        }
        
        function removePill(text, type) {
            if (type === 'mood') {
                activeFilters.mood.delete(text);
                document.querySelector(`[data-mood="${text}"]`)?.classList.remove('active');
            } else if (type === 'location') {
                activeFilters.location = '';
                document.getElementById('locationFilter').value = '';
            } else if (type === 'when') {
                activeFilters.when = 'all';
                document.getElementById('whenFilter').value = 'all';
            } else if (type === 'venue') {
                activeFilters.venue = '';
                document.getElementById('venueFilter').value = '';
            }
            applyFilters();
        }
        
        function renderEvents() {
            const grid = document.getElementById('eventsGrid');
            const noEvents = document.getElementById('noEvents');
            
            if (filteredEvents.length === 0) {
                grid.style.display = 'none';
                noEvents.style.display = 'block';
                return;
            }
            
            grid.style.display = 'grid';
            noEvents.style.display = 'none';
            
            grid.innerHTML = filteredEvents.map(event => createEventCard(event)).join('');
        }
        
        function createEventCard(event) {
            const imageHtml = event.image 
                ? `<img src="${event.image}" alt="${event.title}" class="event-image">`
                : `<div class="event-image"></div>`;
            
            const recurringHtml = event.recurring 
                ? `<div class="event-recurring">üîÑ ${event.recurring}</div>`
                : '';
            
            const dateHtml = event.date 
                ? `<div class="event-date">üìÖ ${event.date}</div>`
                : '';
            
            const timeHtml = event.time 
                ? `<div class="event-time">üïê ${event.time}</div>`
                : '';
            
            const descriptionHtml = event.description 
                ? `<div class="event-description">${truncateText(event.description, 120)}</div>`
                : '';
            
            const linkHtml = event.link 
                ? `<a href="${event.link}" target="_blank" class="event-link">More Info ‚Üí</a>`
                : '';
            
            // Combine all tags
            const allTags = [...new Set([...event.venue_type_tags, ...event.event_type_tags])];
            const tagsHtml = allTags.length > 0
                ? `<div class="event-tags">${allTags.map(tag => `<span class="event-tag">${tag}</span>`).join('')}</div>`
                : '';
            
            return `
                <div class="event-card">
                    ${imageHtml}
                    <div class="event-content">
                        <div class="event-title">${event.title}</div>
                        <div class="event-venue">üìç ${event.venue}</div>
                        <div class="event-location">${event.location}</div>
                        ${recurringHtml}
                        ${dateHtml}
                        ${timeHtml}
                        ${descriptionHtml}
                        ${tagsHtml}
                        ${linkHtml}
                    </div>
                </div>
            `;
        }
        
        function truncateText(text, maxLength) {
            if (text.length <= maxLength) return text;
            return text.substr(0, maxLength) + '...';
        }
        
        function updateStats() {
            const stats = document.getElementById('stats');
            stats.textContent = `Showing ${filteredEvents.length} of ${allEvents.length} events`;
        }
        
        // Load events on page load
        loadEvents();
    </script>
</body>
</html>
