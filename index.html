<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boulder Events Calendar</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }
        
        h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .filters {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .filter-section {
            margin-bottom: 20px;
        }
        
        .filter-section:last-child {
            margin-bottom: 0;
        }
        
        .filter-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            display: block;
            font-size: 0.95em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .filter-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .tag {
            padding: 8px 16px;
            border-radius: 20px;
            border: 2px solid #e0e0e0;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            user-select: none;
        }
        
        .tag:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }
        
        .tag.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .search-box {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: white;
        }
        
        .search-box:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        /* Search Section */
        .search-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        /* Today Section */
        .today-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }
        
        .today-title {
            font-size: 1.8em;
            color: #333;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .lets-go-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 50px;
            border-radius: 50px;
            font-size: 1.3em;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .lets-go-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.6);
        }
        
        .lets-go-btn:active {
            transform: translateY(-1px);
        }
        
        /* Mood Section */
        .mood-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .mood-title {
            text-align: center;
            font-size: 1.8em;
            color: #333;
            margin-bottom: 25px;
            font-weight: 600;
        }
        
        .mood-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        @media (max-width: 768px) {
            .mood-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .mood-button {
            position: relative;
            aspect-ratio: 1;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        .mood-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.25);
        }
        
        .mood-button.active {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 3px solid white;
        }
        
        .mood-button.active::after {
            content: '‚úì';
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            color: inherit;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
        }
        
        .mood-label {
            font-size: 1.1em;
            font-weight: 600;
            color: white;
            text-align: center;
            z-index: 1;
        }
        
        .mood-icon {
            width: 48px;
            height: 48px;
            color: white;
            opacity: 0.9;
            z-index: 1;
        }
        
        .mood-count {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(255,255,255,0.3);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            backdrop-filter: blur(5px);
        }
        
        /* Mood Button Gradients */
        .music-mood {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .party-mood {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .learning-mood {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .family-mood {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        
        .chill-mood {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }
        
        .arts-mood {
            background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
        }
        
        /* Quick Filters */
        .quick-filters {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        @media (max-width: 768px) {
            .quick-filters {
                flex-direction: column;
            }
        }
        
        .filter-group {
            flex: 1;
            min-width: 180px;
        }
        
        @media (max-width: 768px) {
            .filter-group {
                min-width: 100%;
            }
        }
        
        .filter-group label {
            display: block;
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
        
        .filter-dropdown {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .filter-dropdown:hover {
            border-color: #667eea;
        }
        
        .filter-dropdown:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        /* Active Filters Pills */
        .active-filters {
            background: white;
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .active-filters-label {
            font-weight: 600;
            color: #555;
            font-size: 0.95em;
        }
        
        .filter-pills {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            flex: 1;
        }
        
        .filter-pill {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .filter-pill .remove-pill {
            cursor: pointer;
            font-weight: bold;
            opacity: 0.8;
            transition: opacity 0.2s;
        }
        
        .filter-pill .remove-pill:hover {
            opacity: 1;
        }
        
        .clear-all-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }
        
        .clear-all-btn:hover {
            background: #d32f2f;
            transform: scale(1.05);
        }
        
        /* Advanced Filters */
        .advanced-filters {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .advanced-toggle {
            width: 100%;
            background: transparent;
            border: none;
            padding: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            color: #667eea;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .advanced-toggle:hover {
            color: #764ba2;
        }
        
        .toggle-icon {
            transition: transform 0.3s ease;
        }
        
        .advanced-toggle.open .toggle-icon {
            transform: rotate(180deg);
        }
        
        .advanced-content {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
        }
        
        .filter-section {
            margin-bottom: 20px;
        }
        
        .filter-section:last-child {
            margin-bottom: 0;
        }
        
        .filter-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            display: block;
            font-size: 0.95em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .filter-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .tag {
            padding: 8px 16px;
            border-radius: 20px;
            border: 2px solid #e0e0e0;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            user-select: none;
        }
        
        .tag:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }
        
        .tag.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }
        
        .search-box:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .stats {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.1em;
            backdrop-filter: blur(10px);
        }
        
        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .event-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        
        .event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.25);
        }
        
        .event-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .event-content {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .event-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            line-height: 1.3;
        }
        
        .event-venue {
            color: #667eea;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
        
        .event-location {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 12px;
        }
        
        .event-date, .event-time {
            color: #555;
            margin-bottom: 5px;
            font-size: 0.95em;
        }
        
        .event-recurring {
            background: #ffeaa7;
            color: #d63031;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 0.85em;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 10px;
        }
        
        .event-description {
            color: #666;
            line-height: 1.5;
            margin-bottom: 15px;
            flex-grow: 1;
            font-size: 0.95em;
        }
        
        .event-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }
        
        .event-tag {
            background: #f0f4ff;
            color: #667eea;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 500;
        }
        
        .event-link {
            display: inline-block;
            margin-top: 10px;
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }
        
        .event-link:hover {
            color: #764ba2;
        }
        
        .no-events {
            text-align: center;
            color: white;
            font-size: 1.3em;
            padding: 60px 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }
            
            .events-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéâ Boulder Events Calendar</h1>
            <p class="subtitle">Discover what's happening in Boulder County</p>
        </header>
        
        <!-- Search Bar -->
        <div class="search-section">
            <input type="text" class="search-box" id="searchBox" placeholder="üîç Search events by name, venue, or keyword...">
        </div>
        
        <!-- Today Section -->
        <div class="today-section">
            <h2 class="today-title">What's happening today?</h2>
            <button class="lets-go-btn" id="letsGoBtn">Let's go out!</button>
        </div>
        
        <!-- Mood Filter Buttons -->
        <div class="mood-section">
            <h2 class="mood-title">‚ú® What's Your Mood?</h2>
            <div class="mood-grid">
                <button class="mood-button music-mood" data-mood="music">
                    <div class="mood-label">Live Music</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18V5l12-2v13M9 18c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3zm12-3c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3z"/>
                    </svg>
                    <div class="mood-count" id="musicCount"></div>
                </button>
                
                <button class="mood-button party-mood" data-mood="party">
                    <div class="mood-label">Party Vibes</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 3v18m9-9H3m15.364 6.364L5.636 5.636m12.728 0L5.636 18.364"/>
                    </svg>
                    <div class="mood-count" id="partyCount"></div>
                </button>
                
                <button class="mood-button learning-mood" data-mood="learning">
                    <div class="mood-label">Learn Something</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                    </svg>
                    <div class="mood-count" id="learningCount"></div>
                </button>
                
                <button class="mood-button family-mood" data-mood="family">
                    <div class="mood-label">Family Fun</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <g transform="matrix(1,0,0,1,0,-0.546666)">
                            <g transform="matrix(1.363,0,0,1.363,-1.77493,-4.58072)">
                                <path d="M17.164,9.697C18.226,10.525 18.91,11.816 18.91,13.266C18.91,15.762 16.884,17.788 14.389,17.788C12.401,17.788 10.712,16.502 10.106,14.718C9.501,16.502 7.811,17.788 5.824,17.788C3.328,17.788 1.302,15.762 1.302,13.266C1.302,12.735 1.394,12.224 1.563,11.75L1.564,11.749C2.188,9.999 3.86,8.745 5.824,8.745C6.351,8.745 6.857,8.835 7.328,9.002C7.315,8.802 7.316,8.58 7.356,8.408C7.475,7.9 7.854,7.581 8.333,7.581C8.77,7.58 9.147,7.906 9.28,8.178C9.499,8.626 9.243,8.961 9.191,9.024C9.191,9.024 9.067,9.116 8.97,9.113C8.88,9.11 8.674,9.006 8.674,8.846C8.674,8.757 8.746,8.655 8.746,8.655C8.746,8.655 8.818,8.55 8.76,8.433C8.7,8.309 8.532,8.159 8.334,8.159C8.123,8.159 7.971,8.317 7.919,8.54C7.867,8.76 7.904,9.085 7.933,9.267L7.965,9.284C8.964,9.823 9.737,10.726 10.106,11.815C10.389,10.982 10.908,10.257 11.583,9.722C11.451,9.531 11.275,9.214 11.215,8.819C11.196,8.696 11.175,8.439 11.209,8.196C11.237,7.999 11.305,7.812 11.416,7.682C11.656,7.402 11.973,7.304 12.33,7.359C13.094,7.478 13.989,8.217 14.365,8.555C14.741,8.217 15.636,7.478 16.4,7.359C16.757,7.304 17.074,7.402 17.314,7.682C17.425,7.812 17.492,7.999 17.521,8.196C17.555,8.439 17.534,8.696 17.515,8.819C17.458,9.197 17.293,9.504 17.164,9.697ZM12.057,9.393C12.567,9.085 13.143,8.875 13.758,8.789C13.615,8.668 13.439,8.529 13.247,8.397C12.933,8.183 12.574,7.982 12.241,7.93C12.092,7.907 11.956,7.94 11.855,8.058C11.809,8.112 11.793,8.195 11.782,8.278C11.756,8.455 11.773,8.642 11.787,8.732C11.831,9.024 11.963,9.258 12.057,9.393ZM14.978,8.783C15.596,8.864 16.174,9.069 16.687,9.373C16.78,9.235 16.901,9.01 16.943,8.732C16.957,8.642 16.974,8.455 16.948,8.278C16.937,8.195 16.921,8.112 16.874,8.058C16.774,7.94 16.638,7.907 16.488,7.93C16.156,7.982 15.797,8.183 15.483,8.397C15.294,8.527 15.121,8.663 14.978,8.783ZM14.391,9.724C14.119,10.232 13.615,10.994 12.767,11.728C12.235,12.189 10.875,13.126 10.449,13.417C10.528,15.524 12.263,17.21 14.389,17.21C16.544,17.21 18.297,15.478 18.332,13.331C17.938,13.092 16.812,12.39 16.072,11.741C15.148,10.931 14.653,10.221 14.391,9.724ZM18.279,12.619C17.995,10.9 16.596,9.554 14.851,9.35C15.061,9.782 15.511,10.481 16.453,11.306C17.006,11.791 17.782,12.305 18.279,12.619ZM9.729,12.723C9.575,11.607 8.954,10.64 8.069,10.026C8.067,10.432 8.15,11.07 8.59,11.677C8.904,12.111 9.378,12.483 9.729,12.723ZM7.361,9.634C6.888,9.434 6.369,9.323 5.824,9.323C4.264,9.323 2.915,10.23 2.276,11.545C2.856,11.512 3.938,11.398 5.026,11.006C6.328,10.538 7.037,9.96 7.361,9.634ZM2.046,12.133C1.938,12.492 1.88,12.872 1.88,13.266C1.88,15.443 3.647,17.21 5.824,17.21C7.945,17.21 9.678,15.53 9.763,13.43C9.424,13.224 8.605,12.684 8.121,12.016C7.682,11.408 7.537,10.774 7.502,10.292C7.065,10.664 6.341,11.148 5.221,11.55C3.883,12.032 2.553,12.118 2.046,12.133ZM13.935,9.349C12.162,9.553 10.746,10.934 10.488,12.689C11.06,12.294 11.978,11.647 12.389,11.291C13.234,10.559 13.706,9.8 13.935,9.349Z"/>
                            </g>
                            <g transform="matrix(1.12563,0,0,1.12563,-1.19366,-1.59239)">
                                <path d="M8.586,16.005C8.242,16.375 7.519,16.965 6.398,16.965C4.782,16.965 3.909,15.728 3.909,15.728C3.797,15.571 3.834,15.352 3.992,15.24C4.149,15.128 4.368,15.165 4.48,15.323C4.48,15.323 5.156,16.265 6.398,16.265C7.459,16.265 8.053,15.573 8.196,15.384C8.089,15.028 8.194,14.751 8.195,14.745C8.22,14.581 8.343,14.447 8.563,14.464C8.87,14.488 8.887,14.851 8.887,14.851C8.887,14.851 8.843,15.153 8.929,15.32C9.034,15.519 9.247,15.641 9.288,15.665C9.288,15.665 9.593,15.78 9.5,16.07C9.404,16.369 9.126,16.325 9.126,16.325C9.059,16.325 8.94,16.289 8.887,16.257C8.844,16.232 8.721,16.145 8.586,16.005Z"/>
                            </g>
                            <g transform="matrix(1.12563,0,0,1.12563,10.6869,-1.59239)">
                                <path d="M3.909,15.728C3.797,15.571 3.834,15.352 3.992,15.24C4.149,15.128 4.368,15.165 4.48,15.323C4.48,15.323 5.156,16.265 6.398,16.265C7.627,16.265 8.229,15.337 8.229,15.337C8.333,15.174 8.55,15.126 8.713,15.23C8.876,15.334 8.923,15.551 8.819,15.714C8.819,15.714 8.029,16.965 6.398,16.965C4.782,16.965 3.909,15.728 3.909,15.728Z"/>
                            </g>
                            <g transform="matrix(2.22363,0,0,2.22363,-18.6797,-16.0402)">
                                <circle cx="15.696" cy="13.021" r="0.264"/>
                            </g>
                            <g transform="matrix(2.22363,0,0,2.22363,-30.6315,-16.0402)">
                                <circle cx="15.696" cy="13.021" r="0.264"/>
                            </g>
                            <g transform="matrix(2.22363,0,0,2.22363,-27.384,-16.0402)">
                                <path d="M15.431,13.021C15.431,12.875 15.55,12.757 15.696,12.757C15.841,12.757 15.96,12.875 15.96,13.021L15.431,13.021Z"/>
                            </g>
                            <g transform="matrix(2.22363,0,0,2.22363,-15.4332,-16.0402)">
                                <circle cx="15.696" cy="13.021" r="0.264"/>
                            </g>
                        </g>
                    </svg>
                    <div class="mood-count" id="familyCount"></div>
                </button>
                
                <button class="mood-button chill-mood" data-mood="chill">
                    <div class="mood-label">Chill & Drinks</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <g transform="matrix(0.0872521,0,0,0.0872521,-3.4392,-3.5396)">
                            <path d="M157.9,301.136L158.401,172.62L91.871,99.632L48.711,52.283C46.843,50.234 46.361,47.276 47.481,44.74C48.601,42.204 51.112,40.568 53.884,40.568L300.015,40.568C302.777,40.568 305.282,42.193 306.407,44.716C307.533,47.239 307.069,50.188 305.223,52.244L197.174,172.601L197.174,301.136L227.357,301.136C231.357,301.136 234.605,304.384 234.605,308.384C234.605,312.385 231.357,315.632 227.357,315.632L128.466,315.632C124.465,315.632 121.218,312.385 121.218,308.384C121.218,304.384 124.465,301.136 128.466,301.136L157.9,301.136ZM107.694,96.209L170.585,165.204C171.767,166.5 172.419,168.193 172.412,169.947L171.901,300.802L183.174,300.802L183.174,169.92C183.174,168.193 183.812,166.528 184.965,165.243L236.737,107.575C235.129,107.703 233.506,107.769 231.894,107.753C219.025,107.62 211.921,105.803 199.454,101.562C188.256,97.753 162.669,88.226 141.26,88.313C125.145,88.378 113.943,92.803 107.694,96.209ZM252.568,89.94L284.323,54.568L69.737,54.568L98.035,85.612C105.351,81.062 119.716,74.4 141.203,74.313C164.269,74.22 191.898,84.204 203.963,88.308C214.759,91.98 220.894,93.639 232.038,93.753C240.427,93.84 249.159,91.127 252.568,89.94Z"/>
                        </g>
                    </svg>
                    <div class="mood-count" id="chillCount"></div>
                </button>
                
                <button class="mood-button arts-mood" data-mood="arts">
                    <div class="mood-label">Arts & Culture</div>
                    <svg class="mood-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/>
                    </svg>
                    <div class="mood-count" id="artsCount"></div>
                </button>
            </div>
        </div>
        
        <!-- Quick Filters -->
        <div class="quick-filters">
            <div class="filter-group">
                <label for="locationFilter">üìç Location</label>
                <select id="locationFilter" class="filter-dropdown">
                    <option value="">All Locations</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label for="whenFilter">üìÖ When</label>
                <select id="whenFilter" class="filter-dropdown">
                    <option value="all">All Events</option>
                    <option value="today">Today</option>
                    <option value="tomorrow">Tomorrow</option>
                    <option value="weekend">This Weekend</option>
                    <option value="week">This Week</option>
                    <option value="month">This Month</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label for="venueFilter">üè¢ Venues</label>
                <select id="venueFilter" class="filter-dropdown">
                    <option value="">All Venues</option>
                </select>
            </div>
        </div>
        
        <!-- Active Filters Pills -->
        <div class="active-filters" id="activeFilters" style="display: none;">
            <div class="active-filters-label">Active Filters:</div>
            <div class="filter-pills" id="filterPills"></div>
            <button class="clear-all-btn" id="clearAllBtn">Clear All</button>
        </div>
        
        <div class="stats" id="stats"></div>
        
        <div class="events-grid" id="eventsGrid"></div>
        
        <div class="no-events" id="noEvents" style="display: none;">
            No events found matching your filters. Try adjusting your search!
        </div>
    </div>
    
    <script>
        let allEvents = [];
        let filteredEvents = [];
        let activeFilters = {
            mood: new Set(),
            venue: '',
            location: '',
            when: 'all',
            search: ''
        };
        
        // Mood to tag mapping
        const moodMap = {
            music: ['Music', 'Live Music', 'Dance/Music'],
            party: ['Dance/Music', 'Nightlife', 'Performance', '21+'],
            learning: ['Educational', 'Books & Literary', 'Books', 'Literary'],
            family: ['All Ages', 'Family Friendly', 'Family Fun'],
            chill: ['Bar', 'Pub', 'Food & Drink'],
            arts: ['Arts', 'Performance', 'Community', 'Books & Literary']
        };
        
        // Load events
        async function loadEvents() {
            try {
                const response = await fetch('all_boulder_events.json');
                const data = await response.json();
                allEvents = data.events;
                
                initializeFilters(data.tags);
                filteredEvents = allEvents;
                renderEvents();
                updateStats();
                updateMoodCounts();
            } catch (error) {
                console.error('Error loading events:', error);
                document.getElementById('noEvents').style.display = 'block';
                document.getElementById('noEvents').textContent = 'Error loading events.';
            }
        }
        
        function initializeFilters(tags) {
            // Venue dropdown
            const venueFilter = document.getElementById('venueFilter');
            tags.venues.forEach(venue => {
                const option = document.createElement('option');
                option.value = venue;
                option.textContent = venue;
                venueFilter.appendChild(option);
            });
            
            // Location dropdown
            const locationFilter = document.getElementById('locationFilter');
            tags.locations.forEach(location => {
                const option = document.createElement('option');
                option.value = location;
                option.textContent = location;
                locationFilter.appendChild(option);
            });
        }
        
        // Mood button clicks
        document.querySelectorAll('.mood-button').forEach(button => {
            button.addEventListener('click', () => {
                const mood = button.dataset.mood;
                if (activeFilters.mood.has(mood)) {
                    activeFilters.mood.delete(mood);
                    button.classList.remove('active');
                } else {
                    activeFilters.mood.add(mood);
                    button.classList.add('active');
                }
                applyFilters();
                scrollToResults();
            });
        });
        
        // "Let's go out!" button
        document.getElementById('letsGoBtn').addEventListener('click', () => {
            // Clear all filters first
            activeFilters = {
                mood: new Set(),
                venue: '',
                location: '',
                when: 'today',
                search: ''
            };
            
            // Reset UI
            document.querySelectorAll('.mood-button.active').forEach(b => b.classList.remove('active'));
            document.getElementById('locationFilter').value = '';
            document.getElementById('venueFilter').value = '';
            document.getElementById('whenFilter').value = 'today';
            document.getElementById('searchBox').value = '';
            
            applyFilters();
            scrollToResults();
        });
        
        // Venue dropdown
        document.getElementById('venueFilter').addEventListener('change', (e) => {
            activeFilters.venue = e.target.value;
            applyFilters();
        });
        
        // Location dropdown
        document.getElementById('locationFilter').addEventListener('change', (e) => {
            activeFilters.location = e.target.value;
            applyFilters();
        });
        
        // When filter
        document.getElementById('whenFilter').addEventListener('change', (e) => {
            activeFilters.when = e.target.value;
            applyFilters();
        });
        
        // Search box
        document.getElementById('searchBox').addEventListener('input', (e) => {
            activeFilters.search = e.target.value.toLowerCase();
            applyFilters();
        });
        
        // Scroll to results function
        function scrollToResults() {
            const stats = document.getElementById('stats');
            if (stats) {
                stats.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
        
        // Clear all button
        document.getElementById('clearAllBtn').addEventListener('click', () => {
            activeFilters = {
                mood: new Set(),
                venue: '',
                location: '',
                when: 'all',
                search: ''
            };
            
            document.querySelectorAll('.mood-button.active').forEach(b => b.classList.remove('active'));
            document.getElementById('locationFilter').value = '';
            document.getElementById('venueFilter').value = '';
            document.getElementById('whenFilter').value = 'all';
            document.getElementById('searchBox').value = '';
            
            applyFilters();
        });
        
        function applyFilters() {
            filteredEvents = allEvents.filter(event => {
                // Mood filter
                if (activeFilters.mood.size > 0) {
                    const eventTags = [...(event.venue_type_tags || []), ...(event.event_type_tags || [])];
                    const hasMatch = Array.from(activeFilters.mood).some(mood => {
                        const moodTags = moodMap[mood];
                        return moodTags.some(tag => eventTags.includes(tag));
                    });
                    if (!hasMatch) return false;
                }
                
                // Venue filter
                if (activeFilters.venue && event.venue !== activeFilters.venue) {
                    return false;
                }
                
                // Location filter
                if (activeFilters.location && event.location !== activeFilters.location) {
                    return false;
                }
                
                // When filter
                if (activeFilters.when !== 'all' && !matchesWhenFilter(event, activeFilters.when)) {
                    return false;
                }
                
                // Search filter
                if (activeFilters.search) {
                    const searchText = `${event.title} ${event.venue} ${event.description}`.toLowerCase();
                    if (!searchText.includes(activeFilters.search)) {
                        return false;
                    }
                }
                
                return true;
            });
            
            renderEvents();
            updateStats();
            updateMoodCounts();
            updateFilterPills();
        }
        
        function matchesWhenFilter(event, when) {
            if (!event.normalized_date) return true;
            
            const eventDate = new Date(event.normalized_date);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            switch(when) {
                case 'today':
                    return eventDate.toDateString() === today.toDateString();
                case 'tomorrow':
                    const tomorrow = new Date(today);
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    return eventDate.toDateString() === tomorrow.toDateString();
                case 'weekend':
                    const thisWeekend = getThisWeekend();
                    return eventDate >= thisWeekend.start && eventDate <= thisWeekend.end;
                case 'week':
                    const weekEnd = new Date(today);
                    weekEnd.setDate(weekEnd.getDate() + 7);
                    return eventDate >= today && eventDate <= weekEnd;
                case 'month':
                    const monthEnd = new Date(today);
                    monthEnd.setMonth(monthEnd.getMonth() + 1);
                    return eventDate >= today && eventDate <= monthEnd;
                default:
                    return true;
            }
        }
        
        function getThisWeekend() {
            const today = new Date();
            const day = today.getDay();
            const saturday = new Date(today);
            saturday.setDate(today.getDate() + (6 - day));
            saturday.setHours(0, 0, 0, 0);
            const sunday = new Date(saturday);
            sunday.setDate(saturday.getDate() + 1);
            sunday.setHours(23, 59, 59, 999);
            return { start: saturday, end: sunday };
        }
        
        function updateMoodCounts() {
            Object.keys(moodMap).forEach(mood => {
                const count = allEvents.filter(event => {
                    const eventTags = [...(event.venue_type_tags || []), ...(event.event_type_tags || [])];
                    return moodMap[mood].some(tag => eventTags.includes(tag));
                }).length;
                const countEl = document.getElementById(`${mood}Count`);
                if (countEl) countEl.textContent = count;
            });
        }
        
        function updateFilterPills() {
            const pillsContainer = document.getElementById('filterPills');
            const activeFiltersDiv = document.getElementById('activeFilters');
            pillsContainer.innerHTML = '';
            
            let hasFilters = false;
            
            // Mood pills
            activeFilters.mood.forEach(mood => {
                hasFilters = true;
                const pill = createPill(mood, 'mood');
                pillsContainer.appendChild(pill);
            });
            
            // Location pill
            if (activeFilters.location) {
                hasFilters = true;
                const pill = createPill(`üìç ${activeFilters.location}`, 'location');
                pillsContainer.appendChild(pill);
            }
            
            // When pill
            if (activeFilters.when !== 'all') {
                hasFilters = true;
                const whenLabels = {
                    today: 'Today',
                    tomorrow: 'Tomorrow',
                    weekend: 'This Weekend',
                    week: 'This Week',
                    month: 'This Month'
                };
                const pill = createPill(`üìÖ ${whenLabels[activeFilters.when]}`, 'when');
                pillsContainer.appendChild(pill);
            }
            
            // Venue pill
            if (activeFilters.venue) {
                hasFilters = true;
                const pill = createPill(`üè¢ ${activeFilters.venue}`, 'venue');
                pillsContainer.appendChild(pill);
            }
            
            activeFiltersDiv.style.display = hasFilters ? 'flex' : 'none';
        }
        
        function createPill(text, type) {
            const pill = document.createElement('div');
            pill.className = 'filter-pill';
            pill.innerHTML = `${text} <span class="remove-pill">‚úï</span>`;
            pill.querySelector('.remove-pill').onclick = () => removePill(text, type);
            return pill;
        }
        
        function removePill(text, type) {
            if (type === 'mood') {
                activeFilters.mood.delete(text);
                document.querySelector(`[data-mood="${text}"]`)?.classList.remove('active');
            } else if (type === 'location') {
                activeFilters.location = '';
                document.getElementById('locationFilter').value = '';
            } else if (type === 'when') {
                activeFilters.when = 'all';
                document.getElementById('whenFilter').value = 'all';
            } else if (type === 'venue') {
                activeFilters.venue = '';
                document.getElementById('venueFilter').value = '';
            }
            applyFilters();
        }
        
        function renderEvents() {
            const grid = document.getElementById('eventsGrid');
            const noEvents = document.getElementById('noEvents');
            
            if (filteredEvents.length === 0) {
                grid.style.display = 'none';
                noEvents.style.display = 'block';
                return;
            }
            
            grid.style.display = 'grid';
            noEvents.style.display = 'none';
            
            grid.innerHTML = filteredEvents.map(event => createEventCard(event)).join('');
        }
        
        function createEventCard(event) {
            const imageHtml = event.image 
                ? `<img src="${event.image}" alt="${event.title}" class="event-image">`
                : `<div class="event-image"></div>`;
            
            const recurringHtml = event.recurring 
                ? `<div class="event-recurring">üîÑ ${event.recurring}</div>`
                : '';
            
            const dateHtml = event.date 
                ? `<div class="event-date">üìÖ ${event.date}</div>`
                : '';
            
            const timeHtml = event.time 
                ? `<div class="event-time">üïê ${event.time}</div>`
                : '';
            
            const descriptionHtml = event.description 
                ? `<div class="event-description">${truncateText(event.description, 120)}</div>`
                : '';
            
            const linkHtml = event.link 
                ? `<a href="${event.link}" target="_blank" class="event-link">More Info ‚Üí</a>`
                : '';
            
            // Combine all tags
            const allTags = [...new Set([...event.venue_type_tags, ...event.event_type_tags])];
            const tagsHtml = allTags.length > 0
                ? `<div class="event-tags">${allTags.map(tag => `<span class="event-tag">${tag}</span>`).join('')}</div>`
                : '';
            
            return `
                <div class="event-card">
                    ${imageHtml}
                    <div class="event-content">
                        <div class="event-title">${event.title}</div>
                        <div class="event-venue">üìç ${event.venue}</div>
                        <div class="event-location">${event.location}</div>
                        ${recurringHtml}
                        ${dateHtml}
                        ${timeHtml}
                        ${descriptionHtml}
                        ${tagsHtml}
                        ${linkHtml}
                    </div>
                </div>
            `;
        }
        
        function truncateText(text, maxLength) {
            if (text.length <= maxLength) return text;
            return text.substr(0, maxLength) + '...';
        }
        
        function updateStats() {
            const stats = document.getElementById('stats');
            stats.textContent = `Showing ${filteredEvents.length} of ${allEvents.length} events`;
        }
        
        // Load events on page load
        loadEvents();
    </script>
</body>
</html>
